<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>fareofficelib: Query Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Query Class Reference</h1><!-- doxytag: class="Query" --><div class="dynheader">
Inheritance diagram for Query:</div>
<div class="dynsection">

<p><center><img src="classQuery.png" usemap="#Query_map" border="0" alt=""></center>
<map name="Query_map">
<area href="classPagedQuery.html" alt="PagedQuery" shape="rect" coords="0,56,84,80">
</map>
</div>

<p>
<a href="classQuery-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQuery.html#67cbece2cfb786c278850180164f1d7f">__construct</a> (<a class="el" href="interfaceConnection.html">Connection</a> $conn, $sql=null)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a new <a class="el" href="classQuery.html">Query</a>.  <a href="#67cbece2cfb786c278850180164f1d7f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQuery.html#f3437b2c35a799be45a57865c5067eff">setSql</a> ($sql)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets the SQL we are using.  <a href="#f3437b2c35a799be45a57865c5067eff"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQuery.html#2439c298a95cb01724eac635a7df8caa">setStart</a> ($v)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets the start row or offset.  <a href="#2439c298a95cb01724eac635a7df8caa"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQuery.html#4370648de596a9a766c45754eaba43a3">setMax</a> ($v)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets max rows (limit).  <a href="#4370648de596a9a766c45754eaba43a3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQuery.html#8626e16811b1f475ac6b4f8c1ea53ac2">getRows</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gets array of rows (hashes).  <a href="#8626e16811b1f475ac6b4f8c1ea53ac2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQuery.html#83e2656785fb04fa0694bb3cc4ec164a">getRow</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gets first rows (hash).  <a href="#83e2656785fb04fa0694bb3cc4ec164a"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQuery.html#5b09874ca4fe1728de1babafaf7bf0b2">getCol</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gets array of values for first column in result set.  <a href="#5b09874ca4fe1728de1babafaf7bf0b2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQuery.html#1879db93160284bb89f4e290ba32eb57">getOne</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gets value of first column of first returned row.  <a href="#1879db93160284bb89f4e290ba32eb57"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQuery.html#cd6b61f432dfd2436250bf59144d8882">getAssoc</a> ($scalar=false)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Fetch the entire result set of a query and return it as an associative array using the first column as the key.  <a href="#cd6b61f432dfd2436250bf59144d8882"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQuery.html#4448da9e7c68d21744e3fe7015ad34bf">getDataSet</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Gets a <a class="el" href="classQueryDataSet.html">QueryDataSet</a> representing results of this query.  <a href="#4448da9e7c68d21744e3fe7015ad34bf"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQuery.html#ee3f21f47269725f5c0cc6b66a140d9d">$conn</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQuery.html#9e58c9fa20ae4897a354295d7041cbd5">$sql</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQuery.html#aef7641746af039d3e6d5ed091e3d0e8">$max</a> = 0</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classQuery.html#b96547ea49b155fd365f197b81a6cac8">$start</a> = 0</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>

<p>Definition at line <a class="el" href="Query_8php-source.html#l00038">38</a> of file <a class="el" href="Query_8php-source.html">Query.php</a>.</p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="67cbece2cfb786c278850180164f1d7f"></a><!-- doxytag: member="Query::__construct" ref="67cbece2cfb786c278850180164f1d7f" args="(Connection $conn, $sql=null)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Query::__construct           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="interfaceConnection.html">Connection</a> $&nbsp;</td>
          <td class="paramname"> <em>conn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>sql</em> = <code>null</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a new <a class="el" href="classQuery.html">Query</a>. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="interfaceConnection.html">Connection</a></em>&nbsp;</td><td>$conn </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>$sql </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="Query_8php-source.html#l00057">57</a> of file <a class="el" href="Query_8php-source.html">Query.php</a>.</p>

<p>References <a class="el" href="Query_8php-source.html#l00044">$sql</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00058"></a>00058     {
<a name="l00059"></a>00059         $this-&gt;conn = <a class="code" href="classQuery.html#ee3f21f47269725f5c0cc6b66a140d9d">$conn</a>;
<a name="l00060"></a>00060         $this-&gt;sql = <a class="code" href="classQuery.html#9e58c9fa20ae4897a354295d7041cbd5">$sql</a>;
<a name="l00061"></a>00061     }
</pre></div>
<p>

</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="cd6b61f432dfd2436250bf59144d8882"></a><!-- doxytag: member="Query::getAssoc" ref="cd6b61f432dfd2436250bf59144d8882" args="($scalar=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Query::getAssoc           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>scalar</em> = <code>false</code>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Fetch the entire result set of a query and return it as an associative array using the first column as the key. 
<p>
Note: column names are not preserved when using this function.<p>
<code> For example, if the table 'mytable' contains:</code><p>
<code> ID TEXT DATE -------------------------------- 1 'one' 944679408 2 'two' 944679408 3 'three' 944679408</code><p>
<code> $q = new <a class="el" href="classQuery.html">Query</a>("SELECT id, text FROM mytable") $q-&gt;<a class="el" href="classQuery.html#cd6b61f432dfd2436250bf59144d8882" title="Fetch the entire result set of a query and return it as an associative array using...">getAssoc()</a> returns: array( '1' =&gt; array('one'), '2' =&gt; array('two'), '3' =&gt; array('three'), )</code><p>
<code> ... or call $q-&gt;getAssoc($scalar=true) to avoid wrapping results in an array (only applies if only 2 cols are returned): array( '1' =&gt; 'one', '2' =&gt; 'two', '3' =&gt; 'three', ) </code> Keep in mind that database functions in PHP usually return string values for results regardless of the database's internal type.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>boolean</em>&nbsp;</td><td>$scalar Used only when the query returns exactly two columns. If TRUE, the values of second column are not wrapped in an array. Default here is false, in order to assure expected behavior.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>array Associative array with results from the query. </dd></dl>
<dl class="author" compact><dt><b>Author:</b></dt><dd>Lukas Smith &lt;<a href="mailto:smith@backendmedia.com">smith@backendmedia.com</a>&gt; (MDB) </dd></dl>

<p>Definition at line <a class="el" href="Query_8php-source.html#l00210">210</a> of file <a class="el" href="Query_8php-source.html">Query.php</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00211"></a>00211     {
<a name="l00212"></a>00212         $stmt = $this-&gt;conn-&gt;createStatement();
<a name="l00213"></a>00213         <span class="keywordflow">if</span> ($this-&gt;max) $stmt-&gt;setLimit($this-&gt;max);
<a name="l00214"></a>00214         <span class="keywordflow">if</span> ($this-&gt;start) $stmt-&gt;setOffset($this-&gt;start);
<a name="l00215"></a>00215         $rs = $stmt-&gt;executeQuery($this-&gt;sql);
<a name="l00216"></a>00216         
<a name="l00217"></a>00217         $numcols = null;
<a name="l00218"></a>00218         $results = array();
<a name="l00219"></a>00219         <span class="keywordflow">while</span>($rs-&gt;next()) {
<a name="l00220"></a>00220             $fields = $rs-&gt;getRow();
<a name="l00221"></a>00221             <span class="keywordflow">if</span> ($numcols === null) {
<a name="l00222"></a>00222                 $numcols = count($fields);
<a name="l00223"></a>00223             }
<a name="l00224"></a>00224             <span class="keywordflow">if</span> (!$scalar || ($numcols &gt; 2)) {
<a name="l00225"></a>00225                 $results[ array_shift($fields) ] = array_values($fields);
<a name="l00226"></a>00226             } <span class="keywordflow">else</span> {
<a name="l00227"></a>00227                 $results[ array_shift($fields) ] = array_shift($fields);
<a name="l00228"></a>00228             }
<a name="l00229"></a>00229         }
<a name="l00230"></a>00230         
<a name="l00231"></a>00231         $rs-&gt;close();
<a name="l00232"></a>00232         $stmt-&gt;close();
<a name="l00233"></a>00233         
<a name="l00234"></a>00234         <span class="keywordflow">return</span> $results;
<a name="l00235"></a>00235     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="5b09874ca4fe1728de1babafaf7bf0b2"></a><!-- doxytag: member="Query::getCol" ref="5b09874ca4fe1728de1babafaf7bf0b2" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Query::getCol           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Gets array of values for first column in result set. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>array string[] Array of values for first column. </dd></dl>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="classSQLException.html">SQLException</a></em>&nbsp;</td><td></td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="Query_8php-source.html#l00135">135</a> of file <a class="el" href="Query_8php-source.html">Query.php</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00136"></a>00136     {
<a name="l00137"></a>00137         $stmt = $this-&gt;conn-&gt;createStatement();
<a name="l00138"></a>00138         <span class="keywordflow">if</span> ($this-&gt;max) $stmt-&gt;setLimit($this-&gt;max);
<a name="l00139"></a>00139         <span class="keywordflow">if</span> ($this-&gt;start) $stmt-&gt;setOffset($this-&gt;start);
<a name="l00140"></a>00140         $rs = $stmt-&gt;executeQuery($this-&gt;sql);
<a name="l00141"></a>00141         $results = array();
<a name="l00142"></a>00142         <span class="keywordflow">while</span>($rs-&gt;next()) {
<a name="l00143"></a>00143             $results[] = array_shift($rs-&gt;getRow());
<a name="l00144"></a>00144         }
<a name="l00145"></a>00145         $rs-&gt;close();
<a name="l00146"></a>00146         $stmt-&gt;close();
<a name="l00147"></a>00147         <span class="keywordflow">return</span> $results;
<a name="l00148"></a>00148     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="4448da9e7c68d21744e3fe7015ad34bf"></a><!-- doxytag: member="Query::getDataSet" ref="4448da9e7c68d21744e3fe7015ad34bf" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Query::getDataSet           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Gets a <a class="el" href="classQueryDataSet.html">QueryDataSet</a> representing results of this query. 
<p>
The <a class="el" href="classQueryDataSet.html">QueryDataSet</a> that is returned will be ready to use (records will already have been fetched). Currently only QueryDataSets are returned, so you will not be able to manipulate (update/delete/insert) <a class="el" href="classRecord.html">Record</a> objects in returned <a class="el" href="classDataSet.html">DataSet</a>.<p>
<code> $q = new <a class="el" href="classQuery.html">Query</a>("SELECT * FROM author"); $q-&gt;setLimit(10); $qds = $q-&gt;<a class="el" href="classQuery.html#4448da9e7c68d21744e3fe7015ad34bf" title="Gets a QueryDataSet representing results of this query.">getDataSet()</a>; foreach($q-&gt;<a class="el" href="classQuery.html#4448da9e7c68d21744e3fe7015ad34bf" title="Gets a QueryDataSet representing results of this query.">getDataSet()</a> as $rec) { $rec-&gt;getValue("name"); } </code><p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd><a class="el" href="classQueryDataSet.html">QueryDataSet</a> QDS containing the results. </dd></dl>

<p>Definition at line <a class="el" href="Query_8php-source.html#l00256">256</a> of file <a class="el" href="Query_8php-source.html">Query.php</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00257"></a>00257     {
<a name="l00258"></a>00258         include_once <span class="stringliteral">'jargon/QueryDataSet.php'</span>;
<a name="l00259"></a>00259         $qds = <span class="keyword">new</span> <a class="code" href="classQueryDataSet.html">QueryDataSet</a>($this-&gt;conn, $this-&gt;sql);
<a name="l00260"></a>00260         $qds-&gt;fetchRecords($this-&gt;start, $this-&gt;max);
<a name="l00261"></a>00261         <span class="keywordflow">return</span> $qds;
<a name="l00262"></a>00262     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="1879db93160284bb89f4e290ba32eb57"></a><!-- doxytag: member="Query::getOne" ref="1879db93160284bb89f4e290ba32eb57" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Query::getOne           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Gets value of first column of first returned row. 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>string Value for first column in first row. </dd></dl>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="classSQLException.html">SQLException</a></em>&nbsp;</td><td></td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="Query_8php-source.html#l00155">155</a> of file <a class="el" href="Query_8php-source.html">Query.php</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00156"></a>00156     {
<a name="l00157"></a>00157         $stmt = $this-&gt;conn-&gt;createStatement();
<a name="l00158"></a>00158         <span class="keywordflow">if</span> ($this-&gt;max) $stmt-&gt;setLimit($this-&gt;max);
<a name="l00159"></a>00159         <span class="keywordflow">if</span> ($this-&gt;start) $stmt-&gt;setOffset($this-&gt;start);
<a name="l00160"></a>00160         $rs = $stmt-&gt;executeQuery($this-&gt;sql);
<a name="l00161"></a>00161         $rs-&gt;next();
<a name="l00162"></a>00162         $res = array_shift($rs-&gt;getRow());
<a name="l00163"></a>00163         $rs-&gt;close();
<a name="l00164"></a>00164         $stmt-&gt;close();
<a name="l00165"></a>00165         <span class="keywordflow">return</span> $res;
<a name="l00166"></a>00166     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="83e2656785fb04fa0694bb3cc4ec164a"></a><!-- doxytag: member="Query::getRow" ref="83e2656785fb04fa0694bb3cc4ec164a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Query::getRow           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Gets first rows (hash). 
<p>
Frees resultset. <dl class="return" compact><dt><b>Returns:</b></dt><dd>array string[] First row. </dd></dl>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="classSQLException.html">SQLException</a></em>&nbsp;</td><td></td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="Query_8php-source.html#l00117">117</a> of file <a class="el" href="Query_8php-source.html">Query.php</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00118"></a>00118     {
<a name="l00119"></a>00119         $stmt = $this-&gt;conn-&gt;createStatement();
<a name="l00120"></a>00120         <span class="keywordflow">if</span> ($this-&gt;max) $stmt-&gt;setLimit($this-&gt;max);
<a name="l00121"></a>00121         <span class="keywordflow">if</span> ($this-&gt;start) $stmt-&gt;setOffset($this-&gt;start);
<a name="l00122"></a>00122         $rs = $stmt-&gt;executeQuery($this-&gt;sql);
<a name="l00123"></a>00123         $rs-&gt;next();
<a name="l00124"></a>00124         $results = $rs-&gt;getRow();        
<a name="l00125"></a>00125         $rs-&gt;close();
<a name="l00126"></a>00126         $stmt-&gt;close();
<a name="l00127"></a>00127         <span class="keywordflow">return</span> $results;
<a name="l00128"></a>00128     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="8626e16811b1f475ac6b4f8c1ea53ac2"></a><!-- doxytag: member="Query::getRows" ref="8626e16811b1f475ac6b4f8c1ea53ac2" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Query::getRows           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Gets array of rows (hashes). 
<p>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>array string[][] Array of row hashes. </dd></dl>
<dl compact><dt><b>Exceptions:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em><a class="el" href="classSQLException.html">SQLException</a></em>&nbsp;</td><td></td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="Query_8php-source.html#l00096">96</a> of file <a class="el" href="Query_8php-source.html">Query.php</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00097"></a>00097     {
<a name="l00098"></a>00098         $stmt = $this-&gt;conn-&gt;createStatement();
<a name="l00099"></a>00099         <span class="keywordflow">if</span> ($this-&gt;max) $stmt-&gt;setLimit($this-&gt;max);
<a name="l00100"></a>00100         <span class="keywordflow">if</span> ($this-&gt;start) $stmt-&gt;setOffset($this-&gt;start);
<a name="l00101"></a>00101         $rs = $stmt-&gt;executeQuery($this-&gt;sql);
<a name="l00102"></a>00102         $results = array();
<a name="l00103"></a>00103         <span class="keywordflow">while</span>($rs-&gt;next()) {
<a name="l00104"></a>00104             $results[] = $rs-&gt;getRow();
<a name="l00105"></a>00105         }
<a name="l00106"></a>00106         $rs-&gt;close();
<a name="l00107"></a>00107         $stmt-&gt;close();
<a name="l00108"></a>00108         <span class="keywordflow">return</span> $results;
<a name="l00109"></a>00109     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="4370648de596a9a766c45754eaba43a3"></a><!-- doxytag: member="Query::setMax" ref="4370648de596a9a766c45754eaba43a3" args="($v)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Query::setMax           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>v</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Sets max rows (limit). 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>int</em>&nbsp;</td><td>$v </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>void </dd></dl>

<p>Definition at line <a class="el" href="Query_8php-source.html#l00086">86</a> of file <a class="el" href="Query_8php-source.html">Query.php</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00087"></a>00087     {
<a name="l00088"></a>00088         $this-&gt;max = $v;
<a name="l00089"></a>00089     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="f3437b2c35a799be45a57865c5067eff"></a><!-- doxytag: member="Query::setSql" ref="f3437b2c35a799be45a57865c5067eff" args="($sql)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Query::setSql           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>sql</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Sets the SQL we are using. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>$sql </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="Query_8php-source.html#l00067">67</a> of file <a class="el" href="Query_8php-source.html">Query.php</a>.</p>

<p>References <a class="el" href="Query_8php-source.html#l00044">$sql</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00068"></a>00068     {
<a name="l00069"></a>00069         $this-&gt;sql = <a class="code" href="classQuery.html#9e58c9fa20ae4897a354295d7041cbd5">$sql</a>;
<a name="l00070"></a>00070     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="2439c298a95cb01724eac635a7df8caa"></a><!-- doxytag: member="Query::setStart" ref="2439c298a95cb01724eac635a7df8caa" args="($v)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Query::setStart           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>v</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Sets the start row or offset. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>int</em>&nbsp;</td><td>$v </td></tr>
  </table>
</dl>

<p>Definition at line <a class="el" href="Query_8php-source.html#l00076">76</a> of file <a class="el" href="Query_8php-source.html">Query.php</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00077"></a>00077     {
<a name="l00078"></a>00078         $this-&gt;start = $v;
<a name="l00079"></a>00079     }
</pre></div>
<p>

</div>
</div><p>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="ee3f21f47269725f5c0cc6b66a140d9d"></a><!-- doxytag: member="Query::$conn" ref="ee3f21f47269725f5c0cc6b66a140d9d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Query::$conn<code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="Query_8php-source.html#l00041">41</a> of file <a class="el" href="Query_8php-source.html">Query.php</a>.</p>

</div>
</div><p>
<a class="anchor" name="aef7641746af039d3e6d5ed091e3d0e8"></a><!-- doxytag: member="Query::$max" ref="aef7641746af039d3e6d5ed091e3d0e8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Query::$max = 0<code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="Query_8php-source.html#l00047">47</a> of file <a class="el" href="Query_8php-source.html">Query.php</a>.</p>

</div>
</div><p>
<a class="anchor" name="9e58c9fa20ae4897a354295d7041cbd5"></a><!-- doxytag: member="Query::$sql" ref="9e58c9fa20ae4897a354295d7041cbd5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Query::$sql<code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="Query_8php-source.html#l00044">44</a> of file <a class="el" href="Query_8php-source.html">Query.php</a>.</p>

<p>Referenced by <a class="el" href="Query_8php-source.html#l00057">__construct()</a>, <a class="el" href="PagedQuery_8php-source.html#l00045">PagedQuery::__construct()</a>, and <a class="el" href="Query_8php-source.html#l00067">setSql()</a>.</p>

</div>
</div><p>
<a class="anchor" name="b96547ea49b155fd365f197b81a6cac8"></a><!-- doxytag: member="Query::$start" ref="b96547ea49b155fd365f197b81a6cac8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Query::$start = 0<code> [protected]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>

<p>Definition at line <a class="el" href="Query_8php-source.html#l00050">50</a> of file <a class="el" href="Query_8php-source.html">Query.php</a>.</p>

</div>
</div><p>
<hr>The documentation for this class was generated from the following file:<ul>
<li>Static/PhpInclude/FareOfficeLib/3dPart/jargon/<a class="el" href="Query_8php-source.html">Query.php</a></ul>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Wed May 6 23:10:50 2009 for fareofficelib by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
