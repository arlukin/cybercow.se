<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>fareofficelib: Mail_RFC822 Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css">
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.8 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>Mail_RFC822 Class Reference</h1><!-- doxytag: class="Mail_RFC822" -->o------------------------------------------------------------------------------o | This package is licensed under the Phpguru license.  
<a href="#_details">More...</a>
<p>

<p>
<a href="classMail__RFC822-members.html">List of all members.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMail__RFC822.html#61fa9d35243a153889ad563172cbb3fa">__construct</a> ($address=null, $default_domain=null, $nest_groups=null, $validate=null, $limit=null)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sets up the object.  <a href="#61fa9d35243a153889ad563172cbb3fa"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMail__RFC822.html#69f432d505492514b7b14035132e3ac6">parseAddressList</a> ($address=null, $default_domain=null, $nest_groups=null, $validate=null, $limit=null)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Starts the whole process.  <a href="#69f432d505492514b7b14035132e3ac6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMail__RFC822.html#28bd2e82d2cb95792bea7c0a001eaa79">_splitAddresses</a> ($address)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Splits an address into seperate addresses.  <a href="#28bd2e82d2cb95792bea7c0a001eaa79"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMail__RFC822.html#cbefae7572851cdfe27e18591faca828">_isGroup</a> ($address)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Checks for a group at the start of the string.  <a href="#cbefae7572851cdfe27e18591faca828"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMail__RFC822.html#19f0252e06e4cd928b361366c1a0c85d">_splitCheck</a> ($parts, $char)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A common function that will check an exploded string.  <a href="#19f0252e06e4cd928b361366c1a0c85d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMail__RFC822.html#aeb3782542a5e431c4b8abf510829e25">_hasUnclosedQuotes</a> ($string)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Checks if a string has an unclosed quotes or not.  <a href="#aeb3782542a5e431c4b8abf510829e25"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMail__RFC822.html#cd450b95e2106f962081b67783f2ea0e">_hasUnclosedBrackets</a> ($string, $chars)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Checks if a string has an unclosed brackets or not.  <a href="#cd450b95e2106f962081b67783f2ea0e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMail__RFC822.html#9d87e849e41af9ec742669d8368c07ab">_hasUnclosedBracketsSub</a> ($string, &amp;$num, $char)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sub function that is used only by hasUnclosedBrackets().  <a href="#9d87e849e41af9ec742669d8368c07ab"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMail__RFC822.html#c568bcc4a85041ae809a5f4b22d26f1d">_validateAddress</a> ($address)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Function to begin checking the address.  <a href="#c568bcc4a85041ae809a5f4b22d26f1d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMail__RFC822.html#4d972f22cca7da055726dadb3319820c">_validatePhrase</a> ($phrase)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Function to validate a phrase.  <a href="#4d972f22cca7da055726dadb3319820c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMail__RFC822.html#a603add8f7cf316ee3ad25a018832273">_validateAtom</a> ($atom)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Function to validate an atom which from rfc822 is: atom = 1*&lt;any CHAR except specials, SPACE and CTLs&gt;.  <a href="#a603add8f7cf316ee3ad25a018832273"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMail__RFC822.html#586347cc6067938fa58097dba4ae37ae">_validateQuotedString</a> ($qstring)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Function to validate quoted string, which is: quoted-string = &lt;"&gt; *(qtext/quoted-pair) &lt;"&gt;.  <a href="#586347cc6067938fa58097dba4ae37ae"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMail__RFC822.html#aca007d2fd382abcc422baf05a3d5432">validateMailbox</a> (&amp;$mailbox)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Function to validate a mailbox, which is: mailbox = addr-spec ; simple address / phrase route-addr ; name and route-addr.  <a href="#aca007d2fd382abcc422baf05a3d5432"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMail__RFC822.html#fc64d70445f0947480ee2ea2396e637b">_validateRouteAddr</a> ($route_addr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This function validates a route-addr which is: route-addr = "&lt;" [route] addr-spec "&gt;".  <a href="#fc64d70445f0947480ee2ea2396e637b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMail__RFC822.html#ea2f5fd7e1191059639b2b262d6d74e8">_validateRoute</a> ($route)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Function to validate a route, which is: route = 1#("@" domain) ":".  <a href="#ea2f5fd7e1191059639b2b262d6d74e8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMail__RFC822.html#a772ad9452e6485cdc5a5636d89b0276">_validateDomain</a> ($domain)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Function to validate a domain, though this is not quite what you expect of a strict internet domain.  <a href="#a772ad9452e6485cdc5a5636d89b0276"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMail__RFC822.html#198cb28e17491e41ec059d48fbd9584f">_validateSubdomain</a> ($subdomain)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Function to validate a subdomain: subdomain = domain-ref / domain-literal.  <a href="#198cb28e17491e41ec059d48fbd9584f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMail__RFC822.html#6238757e6dc0819ede4ad676c0903053">_validateDliteral</a> ($dliteral)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Function to validate a domain literal: domain-literal = "[" *(dtext / quoted-pair) "]".  <a href="#6238757e6dc0819ede4ad676c0903053"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMail__RFC822.html#bfe84541903e6f8341c973f3b5a2f0d9">_validateAddrSpec</a> ($addr_spec)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Function to validate an addr-spec.  <a href="#bfe84541903e6f8341c973f3b5a2f0d9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMail__RFC822.html#68da1e20628653d4412b092e4c4178ae">_validateLocalPart</a> ($local_part)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Function to validate the local part of an address: local-part = word *("." word).  <a href="#68da1e20628653d4412b092e4c4178ae"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMail__RFC822.html#a91a7798ff0456bb1ba5210f233d9ff4">approximateCount</a> ($data)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns an approximate count of how many addresses are in the given string.  <a href="#a91a7798ff0456bb1ba5210f233d9ff4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMail__RFC822.html#1ece1c27421b066208c4e57806864d24">isValidInetAddress</a> ($data, $strict=false)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">This is a email validating function seperate to the rest of the class.  <a href="#1ece1c27421b066208c4e57806864d24"></a><br></td></tr>
<tr><td colspan="2"><br><h2>Private Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMail__RFC822.html#5877614f0a6ce26678a0e9539b755b36">$address</a> = ''</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The address being parsed by the RFC822 object.  <a href="#5877614f0a6ce26678a0e9539b755b36"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMail__RFC822.html#b49b7553371daa564eb79e6a8ca3ec1c">$default_domain</a> = 'localhost'</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The default domain to use for unqualified addresses.  <a href="#b49b7553371daa564eb79e6a8ca3ec1c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMail__RFC822.html#d224177cce487dcdfab3bd842759b341">$nestGroups</a> = true</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Should we return a nested array showing groups, or flatten everything? boolean $nestGroups.  <a href="#d224177cce487dcdfab3bd842759b341"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMail__RFC822.html#7ec46d351c4b758a738326d06308e6b4">$validate</a> = true</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Whether or not to validate atoms for non-ascii characters.  <a href="#7ec46d351c4b758a738326d06308e6b4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMail__RFC822.html#2721376cc9ebb037e4675d2b857ec2af">$addresses</a> = array()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The array of raw addresses built up as we parse.  <a href="#2721376cc9ebb037e4675d2b857ec2af"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMail__RFC822.html#a8edf47ae1b5554b6c4fecc4c333236d">$structure</a> = array()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The final array of parsed address information that we build up.  <a href="#a8edf47ae1b5554b6c4fecc4c333236d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMail__RFC822.html#44860e6dd3f70064bdeb06bd738e3a57">$error</a> = null</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The current error message, if any.  <a href="#44860e6dd3f70064bdeb06bd738e3a57"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMail__RFC822.html#d4aa3245d1f3ef7b6399cd0d15caeb34">$index</a> = null</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">An internal counter/pointer.  <a href="#d4aa3245d1f3ef7b6399cd0d15caeb34"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMail__RFC822.html#b4785c26251c6a2058189aeee0039be2">$num_groups</a> = 0</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The number of groups that have been found in the address list.  <a href="#b4785c26251c6a2058189aeee0039be2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMail__RFC822.html#a37e5ef8742e15b9be63bfc4e596e82d">$mailRFC822</a> = true</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A variable so that we can tell whether or not we're inside a <a class="el" href="classMail__RFC822.html" title="o------------------------------------------------------------------------------o...">Mail_RFC822</a> object.  <a href="#a37e5ef8742e15b9be63bfc4e596e82d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classMail__RFC822.html#15c34769862f0b8bd05c97ee74f5d265">$limit</a> = null</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">A limit after which processing stops int $limit.  <a href="#15c34769862f0b8bd05c97ee74f5d265"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
o------------------------------------------------------------------------------o | This package is licensed under the Phpguru license. 
<p>
A quick summary is | | that for commercial use, there is a small one-time licensing fee to pay. For | | registered charities and educational institutes there is a reduced license | | fee available. You can read more at: | | | | <a href="http://www.phpguru.org/static/license.html">http://www.phpguru.org/static/license.html</a> | o------------------------------------------------------------------------------o<p>
© Copyright 2008,2009 Richard Heyes RFC 822 Email address list validation Utility What is it?<p>
This class will take an address string, and parse it into it's consituent parts, be that either addresses, groups, or combinations. Nested groups are not supported. The structure it returns is pretty straight forward, and is similar to that provided by the imap_rfc822_parse_adrlist(). Use print_r() to view the structure.<p>
How do I use it?<p>
$address_string = 'My Group: "Richard Heyes" &lt;richard&gt; (A comment), <a href="mailto:ted@example.com">ted@example.com</a> (Ted Bloggs), Barney;'; $structure = <a class="el" href="classMail__RFC822.html#69f432d505492514b7b14035132e3ac6" title="Starts the whole process.">Mail_RFC822::parseAddressList</a>($address_string, 'example.com', TRUE) print_r($structure); 
<p>Definition at line <a class="el" href="RFC822_8php-source.html#l00033">33</a> of file <a class="el" href="RFC822_8php-source.html">RFC822.php</a>.</p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="61fa9d35243a153889ad563172cbb3fa"></a><!-- doxytag: member="Mail_RFC822::__construct" ref="61fa9d35243a153889ad563172cbb3fa" args="($address=null, $default_domain=null, $nest_groups=null, $validate=null, $limit=null)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Mail_RFC822::__construct           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>address</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>default_domain</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>nest_groups</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>validate</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>limit</em> = <code>null</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Sets up the object. 
<p>
The address must either be set here or when calling <a class="el" href="classMail__RFC822.html#69f432d505492514b7b14035132e3ac6" title="Starts the whole process.">parseAddressList()</a>. One or the other.<p>
public <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>$address The address(es) to validate. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>$default_domain Default domain/host etc. If not supplied, will be set to localhost. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>boolean</em>&nbsp;</td><td>$nest_groups Whether to return the structure with groups nested for easier viewing. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>boolean</em>&nbsp;</td><td>$validate Whether to validate atoms. Turn this off if you need to run addresses through before encoding the personal names, for instance.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>object <a class="el" href="classMail__RFC822.html" title="o------------------------------------------------------------------------------o...">Mail_RFC822</a> A new <a class="el" href="classMail__RFC822.html" title="o------------------------------------------------------------------------------o...">Mail_RFC822</a> object. </dd></dl>

<p>Definition at line <a class="el" href="RFC822_8php-source.html#l00116">116</a> of file <a class="el" href="RFC822_8php-source.html">RFC822.php</a>.</p>

<p>References <a class="el" href="RFC822_8php-source.html#l00039">$address</a>, <a class="el" href="RFC822_8php-source.html#l00045">$default_domain</a>, <a class="el" href="RFC822_8php-source.html#l00101">$limit</a>, and <a class="el" href="RFC822_8php-source.html#l00057">$validate</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00117"></a>00117     {
<a name="l00118"></a>00118         <span class="keywordflow">if</span> (isset(<a class="code" href="classMail__RFC822.html#5877614f0a6ce26678a0e9539b755b36" title="The address being parsed by the RFC822 object.">$address</a>))        $this-&gt;address        = <a class="code" href="classMail__RFC822.html#5877614f0a6ce26678a0e9539b755b36" title="The address being parsed by the RFC822 object.">$address</a>;
<a name="l00119"></a>00119         <span class="keywordflow">if</span> (isset(<a class="code" href="classMail__RFC822.html#b49b7553371daa564eb79e6a8ca3ec1c" title="The default domain to use for unqualified addresses.">$default_domain</a>)) $this-&gt;default_domain = <a class="code" href="classMail__RFC822.html#b49b7553371daa564eb79e6a8ca3ec1c" title="The default domain to use for unqualified addresses.">$default_domain</a>;
<a name="l00120"></a>00120         <span class="keywordflow">if</span> (isset($nest_groups))    $this-&gt;nestGroups     = $nest_groups;
<a name="l00121"></a>00121         <span class="keywordflow">if</span> (isset(<a class="code" href="classMail__RFC822.html#7ec46d351c4b758a738326d06308e6b4" title="Whether or not to validate atoms for non-ascii characters.">$validate</a>))       $this-&gt;validate       = <a class="code" href="classMail__RFC822.html#7ec46d351c4b758a738326d06308e6b4" title="Whether or not to validate atoms for non-ascii characters.">$validate</a>;
<a name="l00122"></a>00122         <span class="keywordflow">if</span> (isset(<a class="code" href="classMail__RFC822.html#15c34769862f0b8bd05c97ee74f5d265" title="A limit after which processing stops int $limit.">$limit</a>))          $this-&gt;limit          = <a class="code" href="classMail__RFC822.html#15c34769862f0b8bd05c97ee74f5d265" title="A limit after which processing stops int $limit.">$limit</a>;
<a name="l00123"></a>00123     }
</pre></div>
<p>

</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="cd450b95e2106f962081b67783f2ea0e"></a><!-- doxytag: member="Mail_RFC822::_hasUnclosedBrackets" ref="cd450b95e2106f962081b67783f2ea0e" args="($string, $chars)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Mail_RFC822::_hasUnclosedBrackets           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>string</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>chars</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Checks if a string has an unclosed brackets or not. 
<p>
IMPORTANT: This function handles both angle brackets and square brackets;<p>
private <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>$string The string to check. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>$chars The characters to check for. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>boolean True if there are unclosed brackets inside the string, false otherwise. </dd></dl>

<p>Definition at line <a class="el" href="RFC822_8php-source.html#l00348">348</a> of file <a class="el" href="RFC822_8php-source.html">RFC822.php</a>.</p>

<p>References <a class="el" href="RFC822_8php-source.html#l00373">_hasUnclosedBracketsSub()</a>.</p>

<p>Referenced by <a class="el" href="RFC822_8php-source.html#l00295">_splitCheck()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00349"></a>00349     {
<a name="l00350"></a>00350         $num_angle_start = substr_count($string, $chars[0]);
<a name="l00351"></a>00351         $num_angle_end   = substr_count($string, $chars[1]);
<a name="l00352"></a>00352 
<a name="l00353"></a>00353         $this-&gt;<a class="code" href="classMail__RFC822.html#9d87e849e41af9ec742669d8368c07ab" title="Sub function that is used only by hasUnclosedBrackets().">_hasUnclosedBracketsSub</a>($string, $num_angle_start, $chars[0]);
<a name="l00354"></a>00354         $this-&gt;<a class="code" href="classMail__RFC822.html#9d87e849e41af9ec742669d8368c07ab" title="Sub function that is used only by hasUnclosedBrackets().">_hasUnclosedBracketsSub</a>($string, $num_angle_end, $chars[1]);
<a name="l00355"></a>00355 
<a name="l00356"></a>00356         <span class="keywordflow">if</span> ($num_angle_start &lt; $num_angle_end) {
<a name="l00357"></a>00357             $this-&gt;error = <span class="stringliteral">'Invalid address spec. Unmatched quote or bracket ('</span> . $chars . <span class="charliteral">')'</span>;
<a name="l00358"></a>00358             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00359"></a>00359         } <span class="keywordflow">else</span> {
<a name="l00360"></a>00360             <span class="keywordflow">return</span> ($num_angle_start &gt; $num_angle_end);
<a name="l00361"></a>00361         }
<a name="l00362"></a>00362     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="9d87e849e41af9ec742669d8368c07ab"></a><!-- doxytag: member="Mail_RFC822::_hasUnclosedBracketsSub" ref="9d87e849e41af9ec742669d8368c07ab" args="($string, &amp;$num, $char)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Mail_RFC822::_hasUnclosedBracketsSub           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>string</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&amp;$&nbsp;</td>
          <td class="paramname"> <em>num</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>char</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Sub function that is used only by hasUnclosedBrackets(). 
<p>
private <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>$string The string to check. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>integer</em>&nbsp;</td><td>&amp;$num The number of occurences. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>$char The character to count. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>integer The number of occurences of $char in $string, adjusted for backslashes. </dd></dl>

<p>Definition at line <a class="el" href="RFC822_8php-source.html#l00373">373</a> of file <a class="el" href="RFC822_8php-source.html">RFC822.php</a>.</p>

<p>References <a class="el" href="RFC822_8php-source.html#l00327">_hasUnclosedQuotes()</a>.</p>

<p>Referenced by <a class="el" href="RFC822_8php-source.html#l00348">_hasUnclosedBrackets()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00374"></a>00374     {
<a name="l00375"></a>00375         $parts = explode($char, $string);
<a name="l00376"></a>00376         <span class="keywordflow">for</span> ($i = 0; $i &lt; count($parts); $i++){
<a name="l00377"></a>00377             <span class="keywordflow">if</span> (substr($parts[$i], -1) == <span class="charliteral">'\\'</span> || $this-&gt;<a class="code" href="classMail__RFC822.html#aeb3782542a5e431c4b8abf510829e25" title="Checks if a string has an unclosed quotes or not.">_hasUnclosedQuotes</a>($parts[$i]))
<a name="l00378"></a>00378                 $num--;
<a name="l00379"></a>00379             <span class="keywordflow">if</span> (isset($parts[$i + 1]))
<a name="l00380"></a>00380                 $parts[$i + 1] = $parts[$i] . $char . $parts[$i + 1];
<a name="l00381"></a>00381         }
<a name="l00382"></a>00382         
<a name="l00383"></a>00383         <span class="keywordflow">return</span> $num;
<a name="l00384"></a>00384     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="aeb3782542a5e431c4b8abf510829e25"></a><!-- doxytag: member="Mail_RFC822::_hasUnclosedQuotes" ref="aeb3782542a5e431c4b8abf510829e25" args="($string)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Mail_RFC822::_hasUnclosedQuotes           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>string</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Checks if a string has an unclosed quotes or not. 
<p>
private <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>$string The string to check. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>boolean True if there are unclosed quotes inside the string, false otherwise. </dd></dl>

<p>Definition at line <a class="el" href="RFC822_8php-source.html#l00327">327</a> of file <a class="el" href="RFC822_8php-source.html">RFC822.php</a>.</p>

<p>Referenced by <a class="el" href="RFC822_8php-source.html#l00373">_hasUnclosedBracketsSub()</a>, and <a class="el" href="RFC822_8php-source.html#l00295">_splitCheck()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00328"></a>00328     {
<a name="l00329"></a>00329         $string     = explode(<span class="charliteral">'"'</span>, $string);
<a name="l00330"></a>00330         $string_cnt = count($string);
<a name="l00331"></a>00331 
<a name="l00332"></a>00332         <span class="keywordflow">for</span> ($i = 0; $i &lt; (count($string) - 1); $i++)
<a name="l00333"></a>00333             <span class="keywordflow">if</span> (substr($string[$i], -1) == <span class="charliteral">'\\'</span>)
<a name="l00334"></a>00334                 $string_cnt--;
<a name="l00335"></a>00335 
<a name="l00336"></a>00336         <span class="keywordflow">return</span> ($string_cnt % 2 === 0);
<a name="l00337"></a>00337     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="cbefae7572851cdfe27e18591faca828"></a><!-- doxytag: member="Mail_RFC822::_isGroup" ref="cbefae7572851cdfe27e18591faca828" args="($address)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Mail_RFC822::_isGroup           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>address</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Checks for a group at the start of the string. 
<p>
private <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>$address The address to check. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>boolean Whether or not there is a group at the start of the string. </dd></dl>

<p>Definition at line <a class="el" href="RFC822_8php-source.html#l00270">270</a> of file <a class="el" href="RFC822_8php-source.html">RFC822.php</a>.</p>

<p>References <a class="el" href="RFC822_8php-source.html#l00039">$address</a>, and <a class="el" href="RFC822_8php-source.html#l00295">_splitCheck()</a>.</p>

<p>Referenced by <a class="el" href="RFC822_8php-source.html#l00194">_splitAddresses()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00271"></a>00271     {
<a name="l00272"></a>00272         <span class="comment">// First comma not in quotes, angles or escaped:</span>
<a name="l00273"></a>00273         $parts  = explode(<span class="charliteral">','</span>, <a class="code" href="classMail__RFC822.html#5877614f0a6ce26678a0e9539b755b36" title="The address being parsed by the RFC822 object.">$address</a>);
<a name="l00274"></a>00274         $string = $this-&gt;<a class="code" href="classMail__RFC822.html#19f0252e06e4cd928b361366c1a0c85d" title="A common function that will check an exploded string.">_splitCheck</a>($parts, <span class="charliteral">','</span>);
<a name="l00275"></a>00275 
<a name="l00276"></a>00276         <span class="comment">// Now we have the first address, we can reliably check for a</span>
<a name="l00277"></a>00277         <span class="comment">// group by searching for a colon that's not escaped or in</span>
<a name="l00278"></a>00278         <span class="comment">// quotes or angle brackets.</span>
<a name="l00279"></a>00279         <span class="keywordflow">if</span> (count($parts = explode(<span class="charliteral">':'</span>, $string)) &gt; 1) {
<a name="l00280"></a>00280             $string2 = $this-&gt;<a class="code" href="classMail__RFC822.html#19f0252e06e4cd928b361366c1a0c85d" title="A common function that will check an exploded string.">_splitCheck</a>($parts, <span class="charliteral">':'</span>);
<a name="l00281"></a>00281             <span class="keywordflow">return</span> ($string2 !== $string);
<a name="l00282"></a>00282         } <span class="keywordflow">else</span> {
<a name="l00283"></a>00283             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00284"></a>00284         }
<a name="l00285"></a>00285     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="28bd2e82d2cb95792bea7c0a001eaa79"></a><!-- doxytag: member="Mail_RFC822::_splitAddresses" ref="28bd2e82d2cb95792bea7c0a001eaa79" args="($address)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Mail_RFC822::_splitAddresses           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>address</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Splits an address into seperate addresses. 
<p>
private <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>$address The addresses to split. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>boolean Success or failure. </dd></dl>

<p>Definition at line <a class="el" href="RFC822_8php-source.html#l00194">194</a> of file <a class="el" href="RFC822_8php-source.html">RFC822.php</a>.</p>

<p>References <a class="el" href="RFC822_8php-source.html#l00039">$address</a>, <a class="el" href="RFC822_8php-source.html#l00270">_isGroup()</a>, and <a class="el" href="RFC822_8php-source.html#l00295">_splitCheck()</a>.</p>

<p>Referenced by <a class="el" href="RFC822_8php-source.html#l00138">parseAddressList()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00195"></a>00195     {
<a name="l00196"></a>00196 
<a name="l00197"></a>00197         <span class="keywordflow">if</span> (!empty($this-&gt;limit) AND count($this-&gt;addresses) == $this-&gt;limit) {
<a name="l00198"></a>00198             <span class="keywordflow">return</span> <span class="stringliteral">''</span>;
<a name="l00199"></a>00199         }
<a name="l00200"></a>00200 
<a name="l00201"></a>00201         <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="classMail__RFC822.html#cbefae7572851cdfe27e18591faca828" title="Checks for a group at the start of the string.">_isGroup</a>(<a class="code" href="classMail__RFC822.html#5877614f0a6ce26678a0e9539b755b36" title="The address being parsed by the RFC822 object.">$address</a>) &amp;&amp; !isset($this-&gt;error)) {
<a name="l00202"></a>00202             $split_char = <span class="charliteral">';'</span>;
<a name="l00203"></a>00203             $is_group   = <span class="keyword">true</span>;
<a name="l00204"></a>00204         } elseif (!isset($this-&gt;error)) {
<a name="l00205"></a>00205             $split_char = <span class="charliteral">','</span>;
<a name="l00206"></a>00206             $is_group   = <span class="keyword">false</span>;
<a name="l00207"></a>00207         } elseif (isset($this-&gt;error)) {
<a name="l00208"></a>00208             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00209"></a>00209         }
<a name="l00210"></a>00210 
<a name="l00211"></a>00211         <span class="comment">// Split the string based on the above ten or so lines.</span>
<a name="l00212"></a>00212         $parts  = explode($split_char, <a class="code" href="classMail__RFC822.html#5877614f0a6ce26678a0e9539b755b36" title="The address being parsed by the RFC822 object.">$address</a>);
<a name="l00213"></a>00213         $string = $this-&gt;<a class="code" href="classMail__RFC822.html#19f0252e06e4cd928b361366c1a0c85d" title="A common function that will check an exploded string.">_splitCheck</a>($parts, $split_char);
<a name="l00214"></a>00214 
<a name="l00215"></a>00215         <span class="comment">// If a group...</span>
<a name="l00216"></a>00216         <span class="keywordflow">if</span> ($is_group) {
<a name="l00217"></a>00217             <span class="comment">// If $string does not contain a colon outside of</span>
<a name="l00218"></a>00218             <span class="comment">// brackets/quotes etc then something's fubar.</span>
<a name="l00219"></a>00219 
<a name="l00220"></a>00220             <span class="comment">// First check there's a colon at all:</span>
<a name="l00221"></a>00221             <span class="keywordflow">if</span> (strpos($string, <span class="charliteral">':'</span>) === <span class="keyword">false</span>) {
<a name="l00222"></a>00222                 $this-&gt;error = <span class="stringliteral">'Invalid address: '</span> . $string;
<a name="l00223"></a>00223                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00224"></a>00224             }
<a name="l00225"></a>00225 
<a name="l00226"></a>00226             <span class="comment">// Now check it's outside of brackets/quotes:</span>
<a name="l00227"></a>00227             <span class="keywordflow">if</span> (!$this-&gt;<a class="code" href="classMail__RFC822.html#19f0252e06e4cd928b361366c1a0c85d" title="A common function that will check an exploded string.">_splitCheck</a>(explode(<span class="charliteral">':'</span>, $string), <span class="charliteral">':'</span>))
<a name="l00228"></a>00228                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00229"></a>00229 
<a name="l00230"></a>00230             <span class="comment">// We must have a group at this point, so increase the counter:</span>
<a name="l00231"></a>00231             $this-&gt;num_groups++;
<a name="l00232"></a>00232         }
<a name="l00233"></a>00233 
<a name="l00234"></a>00234         <span class="comment">// $string now contains the first full address/group.</span>
<a name="l00235"></a>00235         <span class="comment">// Add to the addresses array.</span>
<a name="l00236"></a>00236         $this-&gt;addresses[] = array(
<a name="l00237"></a>00237                                    <span class="stringliteral">'address'</span> =&gt; trim($string),
<a name="l00238"></a>00238                                    <span class="stringliteral">'group'</span>   =&gt; $is_group
<a name="l00239"></a>00239                                    );
<a name="l00240"></a>00240 
<a name="l00241"></a>00241         <span class="comment">// Remove the now stored address from the initial line, the +1</span>
<a name="l00242"></a>00242         <span class="comment">// is to account for the explode character.</span>
<a name="l00243"></a>00243         <a class="code" href="classMail__RFC822.html#5877614f0a6ce26678a0e9539b755b36" title="The address being parsed by the RFC822 object.">$address</a> = trim(substr(<a class="code" href="classMail__RFC822.html#5877614f0a6ce26678a0e9539b755b36" title="The address being parsed by the RFC822 object.">$address</a>, strlen($string) + 1));
<a name="l00244"></a>00244 
<a name="l00245"></a>00245         <span class="comment">// If the next char is a comma and this was a group, then</span>
<a name="l00246"></a>00246         <span class="comment">// there are more addresses, otherwise, if there are any more</span>
<a name="l00247"></a>00247         <span class="comment">// chars, then there is another address.</span>
<a name="l00248"></a>00248         <span class="keywordflow">if</span> ($is_group &amp;&amp; substr(<a class="code" href="classMail__RFC822.html#5877614f0a6ce26678a0e9539b755b36" title="The address being parsed by the RFC822 object.">$address</a>, 0, 1) == <span class="charliteral">','</span>){
<a name="l00249"></a>00249             <a class="code" href="classMail__RFC822.html#5877614f0a6ce26678a0e9539b755b36" title="The address being parsed by the RFC822 object.">$address</a> = trim(substr(<a class="code" href="classMail__RFC822.html#5877614f0a6ce26678a0e9539b755b36" title="The address being parsed by the RFC822 object.">$address</a>, 1));
<a name="l00250"></a>00250             <span class="keywordflow">return</span> <a class="code" href="classMail__RFC822.html#5877614f0a6ce26678a0e9539b755b36" title="The address being parsed by the RFC822 object.">$address</a>;
<a name="l00251"></a>00251 
<a name="l00252"></a>00252         } elseif (strlen(<a class="code" href="classMail__RFC822.html#5877614f0a6ce26678a0e9539b755b36" title="The address being parsed by the RFC822 object.">$address</a>) &gt; 0) {
<a name="l00253"></a>00253             <span class="keywordflow">return</span> <a class="code" href="classMail__RFC822.html#5877614f0a6ce26678a0e9539b755b36" title="The address being parsed by the RFC822 object.">$address</a>;
<a name="l00254"></a>00254 
<a name="l00255"></a>00255         } <span class="keywordflow">else</span> {
<a name="l00256"></a>00256             <span class="keywordflow">return</span> <span class="stringliteral">''</span>;
<a name="l00257"></a>00257         }
<a name="l00258"></a>00258 
<a name="l00259"></a>00259         <span class="comment">// If you got here then something's off</span>
<a name="l00260"></a>00260         <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00261"></a>00261     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="19f0252e06e4cd928b361366c1a0c85d"></a><!-- doxytag: member="Mail_RFC822::_splitCheck" ref="19f0252e06e4cd928b361366c1a0c85d" args="($parts, $char)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Mail_RFC822::_splitCheck           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>parts</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>char</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A common function that will check an exploded string. 
<p>
private <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>array</em>&nbsp;</td><td>$parts The exloded string. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>$char The char that was exploded on. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>mixed False if the string contains unclosed quotes/brackets, or the string on success. </dd></dl>

<p>Definition at line <a class="el" href="RFC822_8php-source.html#l00295">295</a> of file <a class="el" href="RFC822_8php-source.html">RFC822.php</a>.</p>

<p>References <a class="el" href="RFC822_8php-source.html#l00348">_hasUnclosedBrackets()</a>, and <a class="el" href="RFC822_8php-source.html#l00327">_hasUnclosedQuotes()</a>.</p>

<p>Referenced by <a class="el" href="RFC822_8php-source.html#l00270">_isGroup()</a>, <a class="el" href="RFC822_8php-source.html#l00194">_splitAddresses()</a>, <a class="el" href="RFC822_8php-source.html#l00393">_validateAddress()</a>, <a class="el" href="RFC822_8php-source.html#l00789">_validateAddrSpec()</a>, <a class="el" href="RFC822_8php-source.html#l00727">_validateDomain()</a>, <a class="el" href="RFC822_8php-source.html#l00820">_validateLocalPart()</a>, <a class="el" href="RFC822_8php-source.html#l00479">_validatePhrase()</a>, <a class="el" href="RFC822_8php-source.html#l00654">_validateRouteAddr()</a>, and <a class="el" href="RFC822_8php-source.html#l00570">validateMailbox()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00296"></a>00296     {
<a name="l00297"></a>00297         $string = $parts[0];
<a name="l00298"></a>00298 
<a name="l00299"></a>00299         <span class="keywordflow">for</span> ($i = 0; $i &lt; count($parts); $i++) {
<a name="l00300"></a>00300             <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="classMail__RFC822.html#aeb3782542a5e431c4b8abf510829e25" title="Checks if a string has an unclosed quotes or not.">_hasUnclosedQuotes</a>($string)
<a name="l00301"></a>00301                 || $this-&gt;<a class="code" href="classMail__RFC822.html#cd450b95e2106f962081b67783f2ea0e" title="Checks if a string has an unclosed brackets or not.">_hasUnclosedBrackets</a>($string, <span class="stringliteral">'&lt;&gt;'</span>)
<a name="l00302"></a>00302                 || $this-&gt;<a class="code" href="classMail__RFC822.html#cd450b95e2106f962081b67783f2ea0e" title="Checks if a string has an unclosed brackets or not.">_hasUnclosedBrackets</a>($string, <span class="stringliteral">'[]'</span>)
<a name="l00303"></a>00303                 || $this-&gt;<a class="code" href="classMail__RFC822.html#cd450b95e2106f962081b67783f2ea0e" title="Checks if a string has an unclosed brackets or not.">_hasUnclosedBrackets</a>($string, <span class="stringliteral">'()'</span>)
<a name="l00304"></a>00304                 || substr($string, -1) == <span class="charliteral">'\\'</span>) {
<a name="l00305"></a>00305                 <span class="keywordflow">if</span> (isset($parts[$i + 1])) {
<a name="l00306"></a>00306                     $string = $string . $char . $parts[$i + 1];
<a name="l00307"></a>00307                 } <span class="keywordflow">else</span> {
<a name="l00308"></a>00308                     $this-&gt;error = <span class="stringliteral">'Invalid address spec. Unclosed bracket or quotes'</span>;
<a name="l00309"></a>00309                     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00310"></a>00310                 }
<a name="l00311"></a>00311             } <span class="keywordflow">else</span> {
<a name="l00312"></a>00312                 $this-&gt;index = $i;
<a name="l00313"></a>00313                 <span class="keywordflow">break</span>;
<a name="l00314"></a>00314             }
<a name="l00315"></a>00315         }
<a name="l00316"></a>00316 
<a name="l00317"></a>00317         <span class="keywordflow">return</span> $string;
<a name="l00318"></a>00318     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="c568bcc4a85041ae809a5f4b22d26f1d"></a><!-- doxytag: member="Mail_RFC822::_validateAddress" ref="c568bcc4a85041ae809a5f4b22d26f1d" args="($address)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Mail_RFC822::_validateAddress           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>address</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Function to begin checking the address. 
<p>
private <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>$address The address to validate. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>mixed False on failure, or a structured array of address information on success. </dd></dl>

<p>Definition at line <a class="el" href="RFC822_8php-source.html#l00393">393</a> of file <a class="el" href="RFC822_8php-source.html">RFC822.php</a>.</p>

<p>References <a class="el" href="RFC822_8php-source.html#l00039">$address</a>, <a class="el" href="RFC822_8php-source.html#l00063">$addresses</a>, <a class="el" href="RFC822_8php-source.html#l00069">$structure</a>, <a class="el" href="RFC822_8php-source.html#l00295">_splitCheck()</a>, and <a class="el" href="RFC822_8php-source.html#l00479">_validatePhrase()</a>.</p>

<p>Referenced by <a class="el" href="RFC822_8php-source.html#l00138">parseAddressList()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00394"></a>00394     {
<a name="l00395"></a>00395         $is_group = <span class="keyword">false</span>;
<a name="l00396"></a>00396 
<a name="l00397"></a>00397         <span class="keywordflow">if</span> (<a class="code" href="classMail__RFC822.html#5877614f0a6ce26678a0e9539b755b36" title="The address being parsed by the RFC822 object.">$address</a>[<span class="stringliteral">'group'</span>]) {
<a name="l00398"></a>00398             $is_group = <span class="keyword">true</span>;
<a name="l00399"></a>00399 
<a name="l00400"></a>00400             <span class="comment">// Get the group part of the name</span>
<a name="l00401"></a>00401             $parts     = explode(<span class="charliteral">':'</span>, <a class="code" href="classMail__RFC822.html#5877614f0a6ce26678a0e9539b755b36" title="The address being parsed by the RFC822 object.">$address</a>[<span class="stringliteral">'address'</span>]);
<a name="l00402"></a>00402             $groupname = $this-&gt;<a class="code" href="classMail__RFC822.html#19f0252e06e4cd928b361366c1a0c85d" title="A common function that will check an exploded string.">_splitCheck</a>($parts, <span class="charliteral">':'</span>);
<a name="l00403"></a>00403             <a class="code" href="classMail__RFC822.html#a8edf47ae1b5554b6c4fecc4c333236d" title="The final array of parsed address information that we build up.">$structure</a> = array();
<a name="l00404"></a>00404 
<a name="l00405"></a>00405             <span class="comment">// And validate the group part of the name.</span>
<a name="l00406"></a>00406             <span class="keywordflow">if</span> (!$this-&gt;<a class="code" href="classMail__RFC822.html#4d972f22cca7da055726dadb3319820c" title="Function to validate a phrase.">_validatePhrase</a>($groupname)){
<a name="l00407"></a>00407                 $this-&gt;error = <span class="stringliteral">'Group name did not validate.'</span>;
<a name="l00408"></a>00408                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00409"></a>00409             } <span class="keywordflow">else</span> {
<a name="l00410"></a>00410                 <span class="comment">// Don't include groups if we are not nesting</span>
<a name="l00411"></a>00411                 <span class="comment">// them. This avoids returning invalid addresses.</span>
<a name="l00412"></a>00412                 <span class="keywordflow">if</span> ($this-&gt;nestGroups) {
<a name="l00413"></a>00413                     <a class="code" href="classMail__RFC822.html#a8edf47ae1b5554b6c4fecc4c333236d" title="The final array of parsed address information that we build up.">$structure</a> = <span class="keyword">new</span> stdClass;
<a name="l00414"></a>00414                     <a class="code" href="classMail__RFC822.html#a8edf47ae1b5554b6c4fecc4c333236d" title="The final array of parsed address information that we build up.">$structure</a>-&gt;groupname = $groupname;
<a name="l00415"></a>00415                 }
<a name="l00416"></a>00416             }
<a name="l00417"></a>00417 
<a name="l00418"></a>00418             <a class="code" href="classMail__RFC822.html#5877614f0a6ce26678a0e9539b755b36" title="The address being parsed by the RFC822 object.">$address</a>[<span class="stringliteral">'address'</span>] = ltrim(substr(<a class="code" href="classMail__RFC822.html#5877614f0a6ce26678a0e9539b755b36" title="The address being parsed by the RFC822 object.">$address</a>[<span class="stringliteral">'address'</span>], strlen($groupname . <span class="charliteral">':'</span>)));
<a name="l00419"></a>00419         }
<a name="l00420"></a>00420 
<a name="l00421"></a>00421         <span class="comment">// If a group then split on comma and put into an array.</span>
<a name="l00422"></a>00422         <span class="comment">// Otherwise, Just put the whole address in an array.</span>
<a name="l00423"></a>00423         <span class="keywordflow">if</span> ($is_group) {
<a name="l00424"></a>00424             <span class="keywordflow">while</span> (strlen(<a class="code" href="classMail__RFC822.html#5877614f0a6ce26678a0e9539b755b36" title="The address being parsed by the RFC822 object.">$address</a>[<span class="stringliteral">'address'</span>]) &gt; 0) {
<a name="l00425"></a>00425                 $parts       = explode(<span class="charliteral">','</span>, <a class="code" href="classMail__RFC822.html#5877614f0a6ce26678a0e9539b755b36" title="The address being parsed by the RFC822 object.">$address</a>[<span class="stringliteral">'address'</span>]);
<a name="l00426"></a>00426                 <a class="code" href="classMail__RFC822.html#2721376cc9ebb037e4675d2b857ec2af" title="The array of raw addresses built up as we parse.">$addresses</a>[] = $this-&gt;<a class="code" href="classMail__RFC822.html#19f0252e06e4cd928b361366c1a0c85d" title="A common function that will check an exploded string.">_splitCheck</a>($parts, <span class="charliteral">','</span>);
<a name="l00427"></a>00427                 <a class="code" href="classMail__RFC822.html#5877614f0a6ce26678a0e9539b755b36" title="The address being parsed by the RFC822 object.">$address</a>[<span class="stringliteral">'address'</span>] = trim(substr(<a class="code" href="classMail__RFC822.html#5877614f0a6ce26678a0e9539b755b36" title="The address being parsed by the RFC822 object.">$address</a>[<span class="stringliteral">'address'</span>], strlen(end(<a class="code" href="classMail__RFC822.html#2721376cc9ebb037e4675d2b857ec2af" title="The array of raw addresses built up as we parse.">$addresses</a>) . <span class="charliteral">','</span>)));
<a name="l00428"></a>00428             }
<a name="l00429"></a>00429         } <span class="keywordflow">else</span> {
<a name="l00430"></a>00430             <a class="code" href="classMail__RFC822.html#2721376cc9ebb037e4675d2b857ec2af" title="The array of raw addresses built up as we parse.">$addresses</a>[] = <a class="code" href="classMail__RFC822.html#5877614f0a6ce26678a0e9539b755b36" title="The address being parsed by the RFC822 object.">$address</a>[<span class="stringliteral">'address'</span>];
<a name="l00431"></a>00431         }
<a name="l00432"></a>00432 
<a name="l00433"></a>00433         <span class="comment">// Check that $addresses is set, if address like this:</span>
<a name="l00434"></a>00434         <span class="comment">// Groupname:;</span>
<a name="l00435"></a>00435         <span class="comment">// Then errors were appearing.</span>
<a name="l00436"></a>00436         <span class="keywordflow">if</span> (!isset(<a class="code" href="classMail__RFC822.html#2721376cc9ebb037e4675d2b857ec2af" title="The array of raw addresses built up as we parse.">$addresses</a>)){
<a name="l00437"></a>00437             $this-&gt;error = <span class="stringliteral">'Empty group.'</span>;
<a name="l00438"></a>00438             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00439"></a>00439         }
<a name="l00440"></a>00440 
<a name="l00441"></a>00441         <span class="keywordflow">for</span> ($i = 0; $i &lt; count(<a class="code" href="classMail__RFC822.html#2721376cc9ebb037e4675d2b857ec2af" title="The array of raw addresses built up as we parse.">$addresses</a>); $i++) {
<a name="l00442"></a>00442             <a class="code" href="classMail__RFC822.html#2721376cc9ebb037e4675d2b857ec2af" title="The array of raw addresses built up as we parse.">$addresses</a>[$i] = trim(<a class="code" href="classMail__RFC822.html#2721376cc9ebb037e4675d2b857ec2af" title="The array of raw addresses built up as we parse.">$addresses</a>[$i]);
<a name="l00443"></a>00443         }
<a name="l00444"></a>00444 
<a name="l00445"></a>00445         <span class="comment">// Validate each mailbox.</span>
<a name="l00446"></a>00446         <span class="comment">// Format could be one of: name &lt;geezer@domain.com&gt;</span>
<a name="l00447"></a>00447         <span class="comment">//                         geezer@domain.com</span>
<a name="l00448"></a>00448         <span class="comment">//                         geezer</span>
<a name="l00449"></a>00449         <span class="comment">// ... or any other format valid by RFC 822.</span>
<a name="l00450"></a>00450         array_walk(<a class="code" href="classMail__RFC822.html#2721376cc9ebb037e4675d2b857ec2af" title="The array of raw addresses built up as we parse.">$addresses</a>, array($this, <span class="stringliteral">'validateMailbox'</span>));
<a name="l00451"></a>00451 
<a name="l00452"></a>00452         <span class="comment">// Nested format</span>
<a name="l00453"></a>00453         <span class="keywordflow">if</span> ($this-&gt;nestGroups) {
<a name="l00454"></a>00454             <span class="keywordflow">if</span> ($is_group) {
<a name="l00455"></a>00455                 <a class="code" href="classMail__RFC822.html#a8edf47ae1b5554b6c4fecc4c333236d" title="The final array of parsed address information that we build up.">$structure</a>-&gt;addresses = <a class="code" href="classMail__RFC822.html#2721376cc9ebb037e4675d2b857ec2af" title="The array of raw addresses built up as we parse.">$addresses</a>;
<a name="l00456"></a>00456             } <span class="keywordflow">else</span> {
<a name="l00457"></a>00457                 <a class="code" href="classMail__RFC822.html#a8edf47ae1b5554b6c4fecc4c333236d" title="The final array of parsed address information that we build up.">$structure</a> = <a class="code" href="classMail__RFC822.html#2721376cc9ebb037e4675d2b857ec2af" title="The array of raw addresses built up as we parse.">$addresses</a>[0];
<a name="l00458"></a>00458             }
<a name="l00459"></a>00459 
<a name="l00460"></a>00460         <span class="comment">// Flat format</span>
<a name="l00461"></a>00461         } <span class="keywordflow">else</span> {
<a name="l00462"></a>00462             <span class="keywordflow">if</span> ($is_group) {
<a name="l00463"></a>00463                 <a class="code" href="classMail__RFC822.html#a8edf47ae1b5554b6c4fecc4c333236d" title="The final array of parsed address information that we build up.">$structure</a> = array_merge(<a class="code" href="classMail__RFC822.html#a8edf47ae1b5554b6c4fecc4c333236d" title="The final array of parsed address information that we build up.">$structure</a>, <a class="code" href="classMail__RFC822.html#2721376cc9ebb037e4675d2b857ec2af" title="The array of raw addresses built up as we parse.">$addresses</a>);
<a name="l00464"></a>00464             } <span class="keywordflow">else</span> {
<a name="l00465"></a>00465                 <a class="code" href="classMail__RFC822.html#a8edf47ae1b5554b6c4fecc4c333236d" title="The final array of parsed address information that we build up.">$structure</a> = <a class="code" href="classMail__RFC822.html#2721376cc9ebb037e4675d2b857ec2af" title="The array of raw addresses built up as we parse.">$addresses</a>;
<a name="l00466"></a>00466             }
<a name="l00467"></a>00467         }
<a name="l00468"></a>00468 
<a name="l00469"></a>00469         <span class="keywordflow">return</span> <a class="code" href="classMail__RFC822.html#a8edf47ae1b5554b6c4fecc4c333236d" title="The final array of parsed address information that we build up.">$structure</a>;
<a name="l00470"></a>00470     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="bfe84541903e6f8341c973f3b5a2f0d9"></a><!-- doxytag: member="Mail_RFC822::_validateAddrSpec" ref="bfe84541903e6f8341c973f3b5a2f0d9" args="($addr_spec)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Mail_RFC822::_validateAddrSpec           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>addr_spec</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Function to validate an addr-spec. 
<p>
addr-spec = local-part "@" domain<p>
private <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>$addr_spec The string to check. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>mixed False on failure, or the validated addr-spec on success. </dd></dl>

<p>Definition at line <a class="el" href="RFC822_8php-source.html#l00789">789</a> of file <a class="el" href="RFC822_8php-source.html">RFC822.php</a>.</p>

<p>References <a class="el" href="RFC822_8php-source.html#l00295">_splitCheck()</a>, <a class="el" href="RFC822_8php-source.html#l00727">_validateDomain()</a>, and <a class="el" href="RFC822_8php-source.html#l00820">_validateLocalPart()</a>.</p>

<p>Referenced by <a class="el" href="RFC822_8php-source.html#l00654">_validateRouteAddr()</a>, and <a class="el" href="RFC822_8php-source.html#l00570">validateMailbox()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00790"></a>00790     {
<a name="l00791"></a>00791         $addr_spec = trim($addr_spec);
<a name="l00792"></a>00792 
<a name="l00793"></a>00793         <span class="comment">// Split on @ sign if there is one.</span>
<a name="l00794"></a>00794         <span class="keywordflow">if</span> (strpos($addr_spec, <span class="charliteral">'@'</span>) !== <span class="keyword">false</span>) {
<a name="l00795"></a>00795             $parts      = explode(<span class="charliteral">'@'</span>, $addr_spec);
<a name="l00796"></a>00796             $local_part = $this-&gt;<a class="code" href="classMail__RFC822.html#19f0252e06e4cd928b361366c1a0c85d" title="A common function that will check an exploded string.">_splitCheck</a>($parts, <span class="charliteral">'@'</span>);
<a name="l00797"></a>00797             $domain     = substr($addr_spec, strlen($local_part . <span class="charliteral">'@'</span>));
<a name="l00798"></a>00798 
<a name="l00799"></a>00799         <span class="comment">// No @ sign so assume the default domain.</span>
<a name="l00800"></a>00800         } <span class="keywordflow">else</span> {
<a name="l00801"></a>00801             $local_part = $addr_spec;
<a name="l00802"></a>00802             $domain     = $this-&gt;default_domain;
<a name="l00803"></a>00803         }
<a name="l00804"></a>00804 
<a name="l00805"></a>00805         <span class="keywordflow">if</span> (($local_part = $this-&gt;<a class="code" href="classMail__RFC822.html#68da1e20628653d4412b092e4c4178ae" title="Function to validate the local part of an address: local-part = word *(&amp;quot;.&amp;quot;...">_validateLocalPart</a>($local_part)) === <span class="keyword">false</span>) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00806"></a>00806         <span class="keywordflow">if</span> (($domain     = $this-&gt;<a class="code" href="classMail__RFC822.html#a772ad9452e6485cdc5a5636d89b0276" title="Function to validate a domain, though this is not quite what you expect of a strict...">_validateDomain</a>($domain)) === <span class="keyword">false</span>) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00807"></a>00807         
<a name="l00808"></a>00808         <span class="comment">// Got here so return successful.</span>
<a name="l00809"></a>00809         <span class="keywordflow">return</span> array(<span class="stringliteral">'local_part'</span> =&gt; $local_part, <span class="stringliteral">'domain'</span> =&gt; $domain);
<a name="l00810"></a>00810     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="a603add8f7cf316ee3ad25a018832273"></a><!-- doxytag: member="Mail_RFC822::_validateAtom" ref="a603add8f7cf316ee3ad25a018832273" args="($atom)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Mail_RFC822::_validateAtom           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>atom</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Function to validate an atom which from rfc822 is: atom = 1*&lt;any CHAR except specials, SPACE and CTLs&gt;. 
<p>
If validation ($this-&gt;validate) has been turned off, then validateAtom() doesn't actually check anything. This is so that you can split a list of addresses up before encoding personal names (umlauts, etc.), for example.<p>
private <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>$atom The string to check. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>boolean Success or failure. </dd></dl>

<p>Definition at line <a class="el" href="RFC822_8php-source.html#l00519">519</a> of file <a class="el" href="RFC822_8php-source.html">RFC822.php</a>.</p>

<p>Referenced by <a class="el" href="RFC822_8php-source.html#l00479">_validatePhrase()</a>, and <a class="el" href="RFC822_8php-source.html#l00755">_validateSubdomain()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00520"></a>00520     {
<a name="l00521"></a>00521         <span class="keywordflow">if</span> (!$this-&gt;validate) {
<a name="l00522"></a>00522             <span class="comment">// Validation has been turned off; assume the atom is okay.</span>
<a name="l00523"></a>00523             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00524"></a>00524         }
<a name="l00525"></a>00525 
<a name="l00526"></a>00526         <span class="comment">// Check for any char from ASCII 0 - ASCII 127</span>
<a name="l00527"></a>00527         <span class="keywordflow">if</span> (!preg_match(<span class="stringliteral">'/^[\\x00-\\x7E]+$/i'</span>, $atom, $matches)) {
<a name="l00528"></a>00528             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00529"></a>00529         }
<a name="l00530"></a>00530 
<a name="l00531"></a>00531         <span class="comment">// Check for specials:</span>
<a name="l00532"></a>00532         <span class="keywordflow">if</span> (preg_match(<span class="stringliteral">'/[][()&lt;&gt;@,;\\:". ]/'</span>, $atom)) {
<a name="l00533"></a>00533             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00534"></a>00534         }
<a name="l00535"></a>00535 
<a name="l00536"></a>00536         <span class="comment">// Check for control characters (ASCII 0-31):</span>
<a name="l00537"></a>00537         <span class="keywordflow">if</span> (preg_match(<span class="stringliteral">'/[\\x00-\\x1F]+/'</span>, $atom)) {
<a name="l00538"></a>00538             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00539"></a>00539         }
<a name="l00540"></a>00540 
<a name="l00541"></a>00541         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00542"></a>00542     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="6238757e6dc0819ede4ad676c0903053"></a><!-- doxytag: member="Mail_RFC822::_validateDliteral" ref="6238757e6dc0819ede4ad676c0903053" args="($dliteral)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Mail_RFC822::_validateDliteral           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>dliteral</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Function to validate a domain literal: domain-literal = "[" *(dtext / quoted-pair) "]". 
<p>
private <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>$dliteral The string to check. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>boolean Success or failure. </dd></dl>

<p>Definition at line <a class="el" href="RFC822_8php-source.html#l00775">775</a> of file <a class="el" href="RFC822_8php-source.html">RFC822.php</a>.</p>

<p>Referenced by <a class="el" href="RFC822_8php-source.html#l00755">_validateSubdomain()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00776"></a>00776     {
<a name="l00777"></a>00777         <span class="keywordflow">return</span> !preg_match(<span class="stringliteral">'/(.)[][\x0D\\\\]/'</span>, $dliteral, $matches) &amp;&amp; $matches[1] != <span class="charliteral">'\\'</span>;
<a name="l00778"></a>00778     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="a772ad9452e6485cdc5a5636d89b0276"></a><!-- doxytag: member="Mail_RFC822::_validateDomain" ref="a772ad9452e6485cdc5a5636d89b0276" args="($domain)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Mail_RFC822::_validateDomain           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>domain</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Function to validate a domain, though this is not quite what you expect of a strict internet domain. 
<p>
domain = sub-domain *("." sub-domain)<p>
private <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>$domain The string to check. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>mixed False on failure, or the validated domain on success. </dd></dl>

<p>Definition at line <a class="el" href="RFC822_8php-source.html#l00727">727</a> of file <a class="el" href="RFC822_8php-source.html">RFC822.php</a>.</p>

<p>References <a class="el" href="RFC822_8php-source.html#l00295">_splitCheck()</a>, and <a class="el" href="RFC822_8php-source.html#l00755">_validateSubdomain()</a>.</p>

<p>Referenced by <a class="el" href="RFC822_8php-source.html#l00789">_validateAddrSpec()</a>, and <a class="el" href="RFC822_8php-source.html#l00704">_validateRoute()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00728"></a>00728     {
<a name="l00729"></a>00729         <span class="comment">// Note the different use of $subdomains and $sub_domains                        </span>
<a name="l00730"></a>00730         $subdomains = explode(<span class="charliteral">'.'</span>, $domain);
<a name="l00731"></a>00731 
<a name="l00732"></a>00732         <span class="keywordflow">while</span> (count($subdomains) &gt; 0) {
<a name="l00733"></a>00733             $sub_domains[] = $this-&gt;<a class="code" href="classMail__RFC822.html#19f0252e06e4cd928b361366c1a0c85d" title="A common function that will check an exploded string.">_splitCheck</a>($subdomains, <span class="charliteral">'.'</span>);
<a name="l00734"></a>00734             <span class="keywordflow">for</span> ($i = 0; $i &lt; $this-&gt;index + 1; $i++)
<a name="l00735"></a>00735                 array_shift($subdomains);
<a name="l00736"></a>00736         }
<a name="l00737"></a>00737 
<a name="l00738"></a>00738         <span class="keywordflow">for</span> ($i = 0; $i &lt; count($sub_domains); $i++) {
<a name="l00739"></a>00739             <span class="keywordflow">if</span> (!$this-&gt;<a class="code" href="classMail__RFC822.html#198cb28e17491e41ec059d48fbd9584f" title="Function to validate a subdomain: subdomain = domain-ref / domain-literal.">_validateSubdomain</a>(trim($sub_domains[$i])))
<a name="l00740"></a>00740                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00741"></a>00741         }
<a name="l00742"></a>00742 
<a name="l00743"></a>00743         <span class="comment">// Managed to get here, so return input.</span>
<a name="l00744"></a>00744         <span class="keywordflow">return</span> $domain;
<a name="l00745"></a>00745     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="68da1e20628653d4412b092e4c4178ae"></a><!-- doxytag: member="Mail_RFC822::_validateLocalPart" ref="68da1e20628653d4412b092e4c4178ae" args="($local_part)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Mail_RFC822::_validateLocalPart           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>local_part</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Function to validate the local part of an address: local-part = word *("." word). 
<p>
private <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>$local_part </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>mixed False on failure, or the validated local part on success. </dd></dl>

<p>Definition at line <a class="el" href="RFC822_8php-source.html#l00820">820</a> of file <a class="el" href="RFC822_8php-source.html">RFC822.php</a>.</p>

<p>References <a class="el" href="RFC822_8php-source.html#l00295">_splitCheck()</a>, and <a class="el" href="RFC822_8php-source.html#l00479">_validatePhrase()</a>.</p>

<p>Referenced by <a class="el" href="RFC822_8php-source.html#l00789">_validateAddrSpec()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00821"></a>00821     {
<a name="l00822"></a>00822         $parts = explode(<span class="charliteral">'.'</span>, $local_part);
<a name="l00823"></a>00823 
<a name="l00824"></a>00824         <span class="comment">// Split the local_part into words.</span>
<a name="l00825"></a>00825         <span class="keywordflow">while</span> (count($parts) &gt; 0){
<a name="l00826"></a>00826             $words[] = $this-&gt;<a class="code" href="classMail__RFC822.html#19f0252e06e4cd928b361366c1a0c85d" title="A common function that will check an exploded string.">_splitCheck</a>($parts, <span class="charliteral">'.'</span>);
<a name="l00827"></a>00827             <span class="keywordflow">for</span> ($i = 0; $i &lt; $this-&gt;index + 1; $i++) {
<a name="l00828"></a>00828                 array_shift($parts);
<a name="l00829"></a>00829             }
<a name="l00830"></a>00830         }
<a name="l00831"></a>00831 
<a name="l00832"></a>00832         <span class="comment">// Validate each word.</span>
<a name="l00833"></a>00833         <span class="keywordflow">for</span> ($i = 0; $i &lt; count($words); $i++) {
<a name="l00834"></a>00834             <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="classMail__RFC822.html#4d972f22cca7da055726dadb3319820c" title="Function to validate a phrase.">_validatePhrase</a>(trim($words[$i])) === <span class="keyword">false</span>) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00835"></a>00835         }
<a name="l00836"></a>00836 
<a name="l00837"></a>00837         <span class="comment">// Managed to get here, so return the input.</span>
<a name="l00838"></a>00838         <span class="keywordflow">return</span> $local_part;
<a name="l00839"></a>00839     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="4d972f22cca7da055726dadb3319820c"></a><!-- doxytag: member="Mail_RFC822::_validatePhrase" ref="4d972f22cca7da055726dadb3319820c" args="($phrase)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Mail_RFC822::_validatePhrase           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>phrase</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Function to validate a phrase. 
<p>
private <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>$phrase The phrase to check. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>boolean Success or failure. </dd></dl>

<p>Definition at line <a class="el" href="RFC822_8php-source.html#l00479">479</a> of file <a class="el" href="RFC822_8php-source.html">RFC822.php</a>.</p>

<p>References <a class="el" href="RFC822_8php-source.html#l00295">_splitCheck()</a>, <a class="el" href="RFC822_8php-source.html#l00519">_validateAtom()</a>, and <a class="el" href="RFC822_8php-source.html#l00552">_validateQuotedString()</a>.</p>

<p>Referenced by <a class="el" href="RFC822_8php-source.html#l00393">_validateAddress()</a>, <a class="el" href="RFC822_8php-source.html#l00820">_validateLocalPart()</a>, and <a class="el" href="RFC822_8php-source.html#l00570">validateMailbox()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00480"></a>00480     {
<a name="l00481"></a>00481         <span class="comment">// Splits on one or more Tab or space.</span>
<a name="l00482"></a>00482         $parts = preg_split(<span class="stringliteral">'/[ \\x09]+/'</span>, $phrase, -1, PREG_SPLIT_NO_EMPTY);
<a name="l00483"></a>00483 
<a name="l00484"></a>00484         $phrase_parts = array();
<a name="l00485"></a>00485         <span class="keywordflow">while</span> (count($parts) &gt; 0){
<a name="l00486"></a>00486             $phrase_parts[] = $this-&gt;<a class="code" href="classMail__RFC822.html#19f0252e06e4cd928b361366c1a0c85d" title="A common function that will check an exploded string.">_splitCheck</a>($parts, <span class="charliteral">' '</span>);
<a name="l00487"></a>00487             <span class="keywordflow">for</span> ($i = 0; $i &lt; $this-&gt;index + 1; $i++)
<a name="l00488"></a>00488                 array_shift($parts);
<a name="l00489"></a>00489         }
<a name="l00490"></a>00490 
<a name="l00491"></a>00491         <span class="keywordflow">for</span> ($i = 0; $i &lt; count($phrase_parts); $i++) {
<a name="l00492"></a>00492             <span class="comment">// If quoted string:</span>
<a name="l00493"></a>00493             <span class="keywordflow">if</span> (substr($phrase_parts[$i], 0, 1) == <span class="charliteral">'"'</span>) {
<a name="l00494"></a>00494                 <span class="keywordflow">if</span> (!$this-&gt;<a class="code" href="classMail__RFC822.html#586347cc6067938fa58097dba4ae37ae" title="Function to validate quoted string, which is: quoted-string = &amp;lt;&amp;quot;&amp;gt; *(qtext/quoted-pair)...">_validateQuotedString</a>($phrase_parts[$i]))
<a name="l00495"></a>00495                     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00496"></a>00496                 <span class="keywordflow">continue</span>;
<a name="l00497"></a>00497             }
<a name="l00498"></a>00498 
<a name="l00499"></a>00499             <span class="comment">// Otherwise it's an atom:</span>
<a name="l00500"></a>00500             <span class="keywordflow">if</span> (!$this-&gt;<a class="code" href="classMail__RFC822.html#a603add8f7cf316ee3ad25a018832273" title="Function to validate an atom which from rfc822 is: atom = 1*&amp;lt;any CHAR except specials...">_validateAtom</a>($phrase_parts[$i])) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00501"></a>00501         }
<a name="l00502"></a>00502 
<a name="l00503"></a>00503         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00504"></a>00504     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="586347cc6067938fa58097dba4ae37ae"></a><!-- doxytag: member="Mail_RFC822::_validateQuotedString" ref="586347cc6067938fa58097dba4ae37ae" args="($qstring)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Mail_RFC822::_validateQuotedString           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>qstring</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Function to validate quoted string, which is: quoted-string = &lt;"&gt; *(qtext/quoted-pair) &lt;"&gt;. 
<p>
private <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>$qstring The string to check </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>boolean Success or failure. </dd></dl>

<p>Definition at line <a class="el" href="RFC822_8php-source.html#l00552">552</a> of file <a class="el" href="RFC822_8php-source.html">RFC822.php</a>.</p>

<p>Referenced by <a class="el" href="RFC822_8php-source.html#l00479">_validatePhrase()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00553"></a>00553     {
<a name="l00554"></a>00554         <span class="comment">// Leading and trailing "</span>
<a name="l00555"></a>00555         $qstring = substr($qstring, 1, -1);
<a name="l00556"></a>00556 
<a name="l00557"></a>00557         <span class="comment">// Perform check.</span>
<a name="l00558"></a>00558         <span class="keywordflow">return</span> !(preg_match(<span class="stringliteral">'/(.)[\x0D\\\\"]/'</span>, $qstring, $matches) &amp;&amp; $matches[1] != <span class="charliteral">'\\'</span>);
<a name="l00559"></a>00559     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="ea2f5fd7e1191059639b2b262d6d74e8"></a><!-- doxytag: member="Mail_RFC822::_validateRoute" ref="ea2f5fd7e1191059639b2b262d6d74e8" args="($route)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Mail_RFC822::_validateRoute           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>route</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Function to validate a route, which is: route = 1#("@" domain) ":". 
<p>
private <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>$route The string to check. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>mixed False on failure, or the validated $route on success. </dd></dl>

<p>Definition at line <a class="el" href="RFC822_8php-source.html#l00704">704</a> of file <a class="el" href="RFC822_8php-source.html">RFC822.php</a>.</p>

<p>References <a class="el" href="RFC822_8php-source.html#l00727">_validateDomain()</a>.</p>

<p>Referenced by <a class="el" href="RFC822_8php-source.html#l00654">_validateRouteAddr()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00705"></a>00705     {
<a name="l00706"></a>00706         <span class="comment">// Split on comma.</span>
<a name="l00707"></a>00707         $domains = explode(<span class="charliteral">','</span>, trim($route));
<a name="l00708"></a>00708 
<a name="l00709"></a>00709         <span class="keywordflow">for</span> ($i = 0; $i &lt; count($domains); $i++) {
<a name="l00710"></a>00710             $domains[$i] = str_replace(<span class="charliteral">'@'</span>, <span class="stringliteral">''</span>, trim($domains[$i]));
<a name="l00711"></a>00711             <span class="keywordflow">if</span> (!$this-&gt;<a class="code" href="classMail__RFC822.html#a772ad9452e6485cdc5a5636d89b0276" title="Function to validate a domain, though this is not quite what you expect of a strict...">_validateDomain</a>($domains[$i])) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00712"></a>00712         }
<a name="l00713"></a>00713 
<a name="l00714"></a>00714         <span class="keywordflow">return</span> $route;
<a name="l00715"></a>00715     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="fc64d70445f0947480ee2ea2396e637b"></a><!-- doxytag: member="Mail_RFC822::_validateRouteAddr" ref="fc64d70445f0947480ee2ea2396e637b" args="($route_addr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Mail_RFC822::_validateRouteAddr           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>route_addr</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This function validates a route-addr which is: route-addr = "&lt;" [route] addr-spec "&gt;". 
<p>
Angle brackets have already been removed at the point of getting to this function.<p>
private <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>$route_addr The string to check. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>mixed False on failure, or an array containing validated address/route information on success. </dd></dl>

<p>Definition at line <a class="el" href="RFC822_8php-source.html#l00654">654</a> of file <a class="el" href="RFC822_8php-source.html">RFC822.php</a>.</p>

<p>References <a class="el" href="RFC822_8php-source.html#l00295">_splitCheck()</a>, <a class="el" href="RFC822_8php-source.html#l00789">_validateAddrSpec()</a>, and <a class="el" href="RFC822_8php-source.html#l00704">_validateRoute()</a>.</p>

<p>Referenced by <a class="el" href="RFC822_8php-source.html#l00570">validateMailbox()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00655"></a>00655     {
<a name="l00656"></a>00656         <span class="comment">// Check for colon.</span>
<a name="l00657"></a>00657         <span class="keywordflow">if</span> (strpos($route_addr, <span class="charliteral">':'</span>) !== <span class="keyword">false</span>) {
<a name="l00658"></a>00658             $parts = explode(<span class="charliteral">':'</span>, $route_addr);
<a name="l00659"></a>00659             $route = $this-&gt;<a class="code" href="classMail__RFC822.html#19f0252e06e4cd928b361366c1a0c85d" title="A common function that will check an exploded string.">_splitCheck</a>($parts, <span class="charliteral">':'</span>);
<a name="l00660"></a>00660         } <span class="keywordflow">else</span> {
<a name="l00661"></a>00661             $route = $route_addr;
<a name="l00662"></a>00662         }
<a name="l00663"></a>00663 
<a name="l00664"></a>00664         <span class="comment">// If $route is same as $route_addr then the colon was in</span>
<a name="l00665"></a>00665         <span class="comment">// quotes or brackets or, of course, non existent.</span>
<a name="l00666"></a>00666         <span class="keywordflow">if</span> ($route === $route_addr){
<a name="l00667"></a>00667             unset($route);
<a name="l00668"></a>00668             $addr_spec = $route_addr;
<a name="l00669"></a>00669             <span class="keywordflow">if</span> (($addr_spec = $this-&gt;<a class="code" href="classMail__RFC822.html#bfe84541903e6f8341c973f3b5a2f0d9" title="Function to validate an addr-spec.">_validateAddrSpec</a>($addr_spec)) === <span class="keyword">false</span>) {
<a name="l00670"></a>00670                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00671"></a>00671             }
<a name="l00672"></a>00672         } <span class="keywordflow">else</span> {
<a name="l00673"></a>00673             <span class="comment">// Validate route part.</span>
<a name="l00674"></a>00674             <span class="keywordflow">if</span> (($route = $this-&gt;<a class="code" href="classMail__RFC822.html#ea2f5fd7e1191059639b2b262d6d74e8" title="Function to validate a route, which is: route = 1#(&amp;quot;@&amp;quot; domain) &amp;quot;:&amp;quot;...">_validateRoute</a>($route)) === <span class="keyword">false</span>) {
<a name="l00675"></a>00675                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00676"></a>00676             }
<a name="l00677"></a>00677 
<a name="l00678"></a>00678             $addr_spec = substr($route_addr, strlen($route . <span class="charliteral">':'</span>));
<a name="l00679"></a>00679 
<a name="l00680"></a>00680             <span class="comment">// Validate addr-spec part.</span>
<a name="l00681"></a>00681             <span class="keywordflow">if</span> (($addr_spec = $this-&gt;<a class="code" href="classMail__RFC822.html#bfe84541903e6f8341c973f3b5a2f0d9" title="Function to validate an addr-spec.">_validateAddrSpec</a>($addr_spec)) === <span class="keyword">false</span>) {
<a name="l00682"></a>00682                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00683"></a>00683             }
<a name="l00684"></a>00684         }
<a name="l00685"></a>00685 
<a name="l00686"></a>00686         <span class="keywordflow">if</span> (isset($route)) {
<a name="l00687"></a>00687             $return[<span class="stringliteral">'adl'</span>] = $route;
<a name="l00688"></a>00688         } <span class="keywordflow">else</span> {
<a name="l00689"></a>00689             $return[<span class="stringliteral">'adl'</span>] = <span class="stringliteral">''</span>;
<a name="l00690"></a>00690         }
<a name="l00691"></a>00691 
<a name="l00692"></a>00692         $return = array_merge($return, $addr_spec);
<a name="l00693"></a>00693         <span class="keywordflow">return</span> $return;
<a name="l00694"></a>00694     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="198cb28e17491e41ec059d48fbd9584f"></a><!-- doxytag: member="Mail_RFC822::_validateSubdomain" ref="198cb28e17491e41ec059d48fbd9584f" args="($subdomain)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Mail_RFC822::_validateSubdomain           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>subdomain</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Function to validate a subdomain: subdomain = domain-ref / domain-literal. 
<p>
private <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>$subdomain The string to check. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>boolean Success or failure. </dd></dl>

<p>Definition at line <a class="el" href="RFC822_8php-source.html#l00755">755</a> of file <a class="el" href="RFC822_8php-source.html">RFC822.php</a>.</p>

<p>References <a class="el" href="RFC822_8php-source.html#l00519">_validateAtom()</a>, and <a class="el" href="RFC822_8php-source.html#l00775">_validateDliteral()</a>.</p>

<p>Referenced by <a class="el" href="RFC822_8php-source.html#l00727">_validateDomain()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00756"></a>00756     {
<a name="l00757"></a>00757         <span class="keywordflow">if</span> (preg_match(<span class="stringliteral">'|^\[(.*)]$|'</span>, $subdomain, $arr)){
<a name="l00758"></a>00758             <span class="keywordflow">if</span> (!$this-&gt;<a class="code" href="classMail__RFC822.html#6238757e6dc0819ede4ad676c0903053" title="Function to validate a domain literal: domain-literal = &amp;quot;[&amp;quot; *(dtext / quoted-pair)...">_validateDliteral</a>($arr[1])) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00759"></a>00759         } <span class="keywordflow">else</span> {
<a name="l00760"></a>00760             <span class="keywordflow">if</span> (!$this-&gt;<a class="code" href="classMail__RFC822.html#a603add8f7cf316ee3ad25a018832273" title="Function to validate an atom which from rfc822 is: atom = 1*&amp;lt;any CHAR except specials...">_validateAtom</a>($subdomain)) <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00761"></a>00761         }
<a name="l00762"></a>00762 
<a name="l00763"></a>00763         <span class="comment">// Got here, so return successful.</span>
<a name="l00764"></a>00764         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00765"></a>00765     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="a91a7798ff0456bb1ba5210f233d9ff4"></a><!-- doxytag: member="Mail_RFC822::approximateCount" ref="a91a7798ff0456bb1ba5210f233d9ff4" args="($data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Mail_RFC822::approximateCount           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>data</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Returns an approximate count of how many addresses are in the given string. 
<p>
This is APPROXIMATE as it only splits based on a comma which has no preceding backslash. Could be useful as large amounts of addresses will end up producing *large* structures when used with <a class="el" href="classMail__RFC822.html#69f432d505492514b7b14035132e3ac6" title="Starts the whole process.">parseAddressList()</a>.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>$data Addresses to count </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>int Approximate count </dd></dl>

<p>Definition at line <a class="el" href="RFC822_8php-source.html#l00851">851</a> of file <a class="el" href="RFC822_8php-source.html">RFC822.php</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00852"></a>00852     {
<a name="l00853"></a>00853         <span class="keywordflow">return</span> count(preg_split(<span class="stringliteral">'/(?&lt;!\\\\),/'</span>, $data));
<a name="l00854"></a>00854     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="1ece1c27421b066208c4e57806864d24"></a><!-- doxytag: member="Mail_RFC822::isValidInetAddress" ref="1ece1c27421b066208c4e57806864d24" args="($data, $strict=false)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Mail_RFC822::isValidInetAddress           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>strict</em> = <code>false</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
This is a email validating function seperate to the rest of the class. 
<p>
It simply validates whether an email is of the common internet form: &lt;user&gt;&lt;domain&gt;. This can be sufficient for most people. Optional stricter mode can be utilised which restricts mailbox characters allowed to alphanumeric, full stop, hyphen and underscore.<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>$data Address to check </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>boolean</em>&nbsp;</td><td>$strict Optional stricter mode </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>mixed False if it fails, an indexed array username/domain if it matches </dd></dl>

<p>Definition at line <a class="el" href="RFC822_8php-source.html#l00869">869</a> of file <a class="el" href="RFC822_8php-source.html">RFC822.php</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00870"></a>00870     {
<a name="l00871"></a>00871         $regex = $strict ? <span class="stringliteral">'/^([.0-9a-z_-]+)@(([0-9a-z-]+\.)+[0-9a-z]{2,4})$/i'</span> : <span class="stringliteral">'/^([*+!.&amp;#$|\'\\%\/0-9a-z^_`{}=?~:-]+)@(([0-9a-z-]+\.)+[0-9a-z]{2,4})$/i'</span>;
<a name="l00872"></a>00872         <span class="keywordflow">if</span> (preg_match($regex, trim($data), $matches)) {
<a name="l00873"></a>00873             <span class="keywordflow">return</span> array($matches[1], $matches[2]);
<a name="l00874"></a>00874         } <span class="keywordflow">else</span> {
<a name="l00875"></a>00875             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00876"></a>00876         }
<a name="l00877"></a>00877     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="69f432d505492514b7b14035132e3ac6"></a><!-- doxytag: member="Mail_RFC822::parseAddressList" ref="69f432d505492514b7b14035132e3ac6" args="($address=null, $default_domain=null, $nest_groups=null, $validate=null, $limit=null)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Mail_RFC822::parseAddressList           </td>
          <td>(</td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>address</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>default_domain</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>nest_groups</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>validate</em> = <code>null</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">$&nbsp;</td>
          <td class="paramname"> <em>limit</em> = <code>null</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Starts the whole process. 
<p>
The address must either be set here or when creating the object. One or the other.<p>
public <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>$address The address(es) to validate. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>$default_domain Default domain/host etc. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>boolean</em>&nbsp;</td><td>$nest_groups Whether to return the structure with groups nested for easier viewing. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>boolean</em>&nbsp;</td><td>$validate Whether to validate atoms. Turn this off if you need to run addresses through before encoding the personal names, for instance.</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>array A structured array of addresses. </dd></dl>

<p>Definition at line <a class="el" href="RFC822_8php-source.html#l00138">138</a> of file <a class="el" href="RFC822_8php-source.html">RFC822.php</a>.</p>

<p>References <a class="el" href="RFC822_8php-source.html#l00039">$address</a>, <a class="el" href="RFC822_8php-source.html#l00045">$default_domain</a>, <a class="el" href="RFC822_8php-source.html#l00101">$limit</a>, <a class="el" href="RFC822_8php-source.html#l00057">$validate</a>, <a class="el" href="RFC822_8php-source.html#l00194">_splitAddresses()</a>, and <a class="el" href="RFC822_8php-source.html#l00393">_validateAddress()</a>.</p>

<p>Referenced by <a class="el" href="Rmail_8php-source.html#l00712">Rmail::send()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00139"></a>00139     {
<a name="l00140"></a>00140 
<a name="l00141"></a>00141         <span class="keywordflow">if</span> (!isset($this-&gt;mailRFC822)) {
<a name="l00142"></a>00142             $obj = <span class="keyword">new</span> <a class="code" href="classMail__RFC822.html" title="o------------------------------------------------------------------------------o...">Mail_RFC822</a>(<a class="code" href="classMail__RFC822.html#5877614f0a6ce26678a0e9539b755b36" title="The address being parsed by the RFC822 object.">$address</a>, <a class="code" href="classMail__RFC822.html#b49b7553371daa564eb79e6a8ca3ec1c" title="The default domain to use for unqualified addresses.">$default_domain</a>, $nest_groups, <a class="code" href="classMail__RFC822.html#7ec46d351c4b758a738326d06308e6b4" title="Whether or not to validate atoms for non-ascii characters.">$validate</a>, <a class="code" href="classMail__RFC822.html#15c34769862f0b8bd05c97ee74f5d265" title="A limit after which processing stops int $limit.">$limit</a>);
<a name="l00143"></a>00143             <span class="keywordflow">return</span> $obj-&gt;parseAddressList();
<a name="l00144"></a>00144         }
<a name="l00145"></a>00145 
<a name="l00146"></a>00146         <span class="keywordflow">if</span> (isset(<a class="code" href="classMail__RFC822.html#5877614f0a6ce26678a0e9539b755b36" title="The address being parsed by the RFC822 object.">$address</a>))        $this-&gt;address        = <a class="code" href="classMail__RFC822.html#5877614f0a6ce26678a0e9539b755b36" title="The address being parsed by the RFC822 object.">$address</a>;
<a name="l00147"></a>00147         <span class="keywordflow">if</span> (isset(<a class="code" href="classMail__RFC822.html#b49b7553371daa564eb79e6a8ca3ec1c" title="The default domain to use for unqualified addresses.">$default_domain</a>)) $this-&gt;default_domain = <a class="code" href="classMail__RFC822.html#b49b7553371daa564eb79e6a8ca3ec1c" title="The default domain to use for unqualified addresses.">$default_domain</a>;
<a name="l00148"></a>00148         <span class="keywordflow">if</span> (isset($nest_groups))    $this-&gt;nestGroups     = $nest_groups;
<a name="l00149"></a>00149         <span class="keywordflow">if</span> (isset(<a class="code" href="classMail__RFC822.html#7ec46d351c4b758a738326d06308e6b4" title="Whether or not to validate atoms for non-ascii characters.">$validate</a>))       $this-&gt;validate       = <a class="code" href="classMail__RFC822.html#7ec46d351c4b758a738326d06308e6b4" title="Whether or not to validate atoms for non-ascii characters.">$validate</a>;
<a name="l00150"></a>00150         <span class="keywordflow">if</span> (isset(<a class="code" href="classMail__RFC822.html#15c34769862f0b8bd05c97ee74f5d265" title="A limit after which processing stops int $limit.">$limit</a>))          $this-&gt;limit          = <a class="code" href="classMail__RFC822.html#15c34769862f0b8bd05c97ee74f5d265" title="A limit after which processing stops int $limit.">$limit</a>;
<a name="l00151"></a>00151 
<a name="l00152"></a>00152         $this-&gt;structure  = array();
<a name="l00153"></a>00153         $this-&gt;addresses  = array();
<a name="l00154"></a>00154         $this-&gt;error      = null;
<a name="l00155"></a>00155         $this-&gt;index      = null;
<a name="l00156"></a>00156 
<a name="l00157"></a>00157         <span class="keywordflow">while</span> ($this-&gt;address = $this-&gt;<a class="code" href="classMail__RFC822.html#28bd2e82d2cb95792bea7c0a001eaa79" title="Splits an address into seperate addresses.">_splitAddresses</a>($this-&gt;address)) {
<a name="l00158"></a>00158             <span class="keywordflow">continue</span>;
<a name="l00159"></a>00159         }
<a name="l00160"></a>00160         
<a name="l00161"></a>00161         <span class="keywordflow">if</span> ($this-&gt;address === <span class="keyword">false</span> || isset($this-&gt;error)) {
<a name="l00162"></a>00162             <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00163"></a>00163         }
<a name="l00164"></a>00164 
<a name="l00165"></a>00165         <span class="comment">// Reset timer since large amounts of addresses can take a long time to</span>
<a name="l00166"></a>00166         <span class="comment">// get here</span>
<a name="l00167"></a>00167         set_time_limit(30);
<a name="l00168"></a>00168 
<a name="l00169"></a>00169         <span class="comment">// Loop through all the addresses</span>
<a name="l00170"></a>00170         <span class="keywordflow">for</span> ($i = 0; $i &lt; count($this-&gt;addresses); $i++){
<a name="l00171"></a>00171 
<a name="l00172"></a>00172             <span class="keywordflow">if</span> (($return = $this-&gt;<a class="code" href="classMail__RFC822.html#c568bcc4a85041ae809a5f4b22d26f1d" title="Function to begin checking the address.">_validateAddress</a>($this-&gt;addresses[$i])) === <span class="keyword">false</span>
<a name="l00173"></a>00173                 || isset($this-&gt;error)) {
<a name="l00174"></a>00174                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00175"></a>00175             }
<a name="l00176"></a>00176             
<a name="l00177"></a>00177             <span class="keywordflow">if</span> (!$this-&gt;nestGroups) {
<a name="l00178"></a>00178                 $this-&gt;structure = array_merge($this-&gt;structure, $return);
<a name="l00179"></a>00179             } <span class="keywordflow">else</span> {
<a name="l00180"></a>00180                 $this-&gt;structure[] = $return;
<a name="l00181"></a>00181             }
<a name="l00182"></a>00182         }
<a name="l00183"></a>00183 
<a name="l00184"></a>00184         <span class="keywordflow">return</span> $this-&gt;structure;
<a name="l00185"></a>00185     }
</pre></div>
<p>

</div>
</div><p>
<a class="anchor" name="aca007d2fd382abcc422baf05a3d5432"></a><!-- doxytag: member="Mail_RFC822::validateMailbox" ref="aca007d2fd382abcc422baf05a3d5432" args="(&amp;$mailbox)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Mail_RFC822::validateMailbox           </td>
          <td>(</td>
          <td class="paramtype">&amp;$&nbsp;</td>
          <td class="paramname"> <em>mailbox</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Function to validate a mailbox, which is: mailbox = addr-spec ; simple address / phrase route-addr ; name and route-addr. 
<p>
public <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>string</em>&nbsp;</td><td>&amp;$mailbox The string to check. </td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>boolean Success or failure. </dd></dl>

<p>Definition at line <a class="el" href="RFC822_8php-source.html#l00570">570</a> of file <a class="el" href="RFC822_8php-source.html">RFC822.php</a>.</p>

<p>References <a class="el" href="RFC822_8php-source.html#l00295">_splitCheck()</a>, <a class="el" href="RFC822_8php-source.html#l00789">_validateAddrSpec()</a>, <a class="el" href="RFC822_8php-source.html#l00479">_validatePhrase()</a>, and <a class="el" href="RFC822_8php-source.html#l00654">_validateRouteAddr()</a>.</p>
<div class="fragment"><pre class="fragment"><a name="l00571"></a>00571     {
<a name="l00572"></a>00572         <span class="comment">// A couple of defaults.</span>
<a name="l00573"></a>00573         $phrase  = <span class="stringliteral">''</span>;
<a name="l00574"></a>00574         $comment = <span class="stringliteral">''</span>;
<a name="l00575"></a>00575 
<a name="l00576"></a>00576         <span class="comment">// Catch any RFC822 comments and store them separately</span>
<a name="l00577"></a>00577         $_mailbox = $mailbox;
<a name="l00578"></a>00578         <span class="keywordflow">while</span> (strlen(trim($_mailbox)) &gt; 0) {
<a name="l00579"></a>00579             $parts = explode(<span class="charliteral">'('</span>, $_mailbox);
<a name="l00580"></a>00580             $before_comment = $this-&gt;<a class="code" href="classMail__RFC822.html#19f0252e06e4cd928b361366c1a0c85d" title="A common function that will check an exploded string.">_splitCheck</a>($parts, <span class="charliteral">'('</span>);
<a name="l00581"></a>00581             <span class="keywordflow">if</span> ($before_comment != $_mailbox) {
<a name="l00582"></a>00582                 <span class="comment">// First char should be a (</span>
<a name="l00583"></a>00583                 $comment    = substr(str_replace($before_comment, <span class="stringliteral">''</span>, $_mailbox), 1);
<a name="l00584"></a>00584                 $parts      = explode(<span class="charliteral">')'</span>, $comment);
<a name="l00585"></a>00585                 $comment    = $this-&gt;<a class="code" href="classMail__RFC822.html#19f0252e06e4cd928b361366c1a0c85d" title="A common function that will check an exploded string.">_splitCheck</a>($parts, <span class="charliteral">')'</span>);
<a name="l00586"></a>00586                 $comments[] = $comment;
<a name="l00587"></a>00587 
<a name="l00588"></a>00588                 <span class="comment">// +1 is for the trailing )</span>
<a name="l00589"></a>00589                 $_mailbox   = substr($_mailbox, strpos($_mailbox, $comment)+strlen($comment)+1);
<a name="l00590"></a>00590             } <span class="keywordflow">else</span> {
<a name="l00591"></a>00591                 <span class="keywordflow">break</span>;
<a name="l00592"></a>00592             }
<a name="l00593"></a>00593         }
<a name="l00594"></a>00594 
<a name="l00595"></a>00595         <span class="keywordflow">for</span>($i=0; $i&lt;count(@$comments); $i++){
<a name="l00596"></a>00596             $mailbox = str_replace(<span class="charliteral">'('</span>.$comments[$i].<span class="charliteral">')'</span>, <span class="stringliteral">''</span>, $mailbox);
<a name="l00597"></a>00597         }
<a name="l00598"></a>00598         $mailbox = trim($mailbox);
<a name="l00599"></a>00599 
<a name="l00600"></a>00600         <span class="comment">// Check for name + route-addr</span>
<a name="l00601"></a>00601         <span class="keywordflow">if</span> (substr($mailbox, -1) == <span class="charliteral">'&gt;'</span> &amp;&amp; substr($mailbox, 0, 1) != <span class="charliteral">'&lt;'</span>) {
<a name="l00602"></a>00602             $parts  = explode(<span class="charliteral">'&lt;'</span>, $mailbox);
<a name="l00603"></a>00603             $name   = $this-&gt;<a class="code" href="classMail__RFC822.html#19f0252e06e4cd928b361366c1a0c85d" title="A common function that will check an exploded string.">_splitCheck</a>($parts, <span class="charliteral">'&lt;'</span>);
<a name="l00604"></a>00604 
<a name="l00605"></a>00605             $phrase     = trim($name);
<a name="l00606"></a>00606             $route_addr = trim(substr($mailbox, strlen($name.<span class="charliteral">'&lt;'</span>), -1));
<a name="l00607"></a>00607 
<a name="l00608"></a>00608             <span class="keywordflow">if</span> ($this-&gt;<a class="code" href="classMail__RFC822.html#4d972f22cca7da055726dadb3319820c" title="Function to validate a phrase.">_validatePhrase</a>($phrase) === <span class="keyword">false</span> || ($route_addr = $this-&gt;<a class="code" href="classMail__RFC822.html#fc64d70445f0947480ee2ea2396e637b" title="This function validates a route-addr which is: route-addr = &amp;quot;&amp;lt;&amp;quot; [route]...">_validateRouteAddr</a>($route_addr)) === <span class="keyword">false</span>)
<a name="l00609"></a>00609                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00610"></a>00610 
<a name="l00611"></a>00611         <span class="comment">// Only got addr-spec</span>
<a name="l00612"></a>00612         } <span class="keywordflow">else</span> {
<a name="l00613"></a>00613             <span class="comment">// First snip angle brackets if present.</span>
<a name="l00614"></a>00614             <span class="keywordflow">if</span> (substr($mailbox,0,1) == <span class="charliteral">'&lt;'</span> &amp;&amp; substr($mailbox,-1) == <span class="charliteral">'&gt;'</span>)
<a name="l00615"></a>00615                 $addr_spec = substr($mailbox,1,-1);
<a name="l00616"></a>00616             <span class="keywordflow">else</span>
<a name="l00617"></a>00617                 $addr_spec = $mailbox;
<a name="l00618"></a>00618 
<a name="l00619"></a>00619             <span class="keywordflow">if</span> (($addr_spec = $this-&gt;<a class="code" href="classMail__RFC822.html#bfe84541903e6f8341c973f3b5a2f0d9" title="Function to validate an addr-spec.">_validateAddrSpec</a>($addr_spec)) === <span class="keyword">false</span>)
<a name="l00620"></a>00620                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00621"></a>00621         }
<a name="l00622"></a>00622 
<a name="l00623"></a>00623         <span class="comment">// Construct the object that will be returned.</span>
<a name="l00624"></a>00624         $mbox = <span class="keyword">new</span> stdClass();
<a name="l00625"></a>00625 
<a name="l00626"></a>00626         <span class="comment">// Add the phrase (even if empty) and comments</span>
<a name="l00627"></a>00627         $mbox-&gt;personal = $phrase;
<a name="l00628"></a>00628         $mbox-&gt;comment  = isset($comments) ? $comments : array();
<a name="l00629"></a>00629 
<a name="l00630"></a>00630         <span class="keywordflow">if</span> (isset($route_addr)) {
<a name="l00631"></a>00631             $mbox-&gt;mailbox = $route_addr[<span class="stringliteral">'local_part'</span>];
<a name="l00632"></a>00632             $mbox-&gt;host    = $route_addr[<span class="stringliteral">'domain'</span>];
<a name="l00633"></a>00633             $route_addr[<span class="stringliteral">'adl'</span>] !== <span class="stringliteral">''</span> ? $mbox-&gt;adl = $route_addr[<span class="stringliteral">'adl'</span>] : <span class="stringliteral">''</span>;
<a name="l00634"></a>00634         } <span class="keywordflow">else</span> {
<a name="l00635"></a>00635             $mbox-&gt;mailbox = $addr_spec[<span class="stringliteral">'local_part'</span>];
<a name="l00636"></a>00636             $mbox-&gt;host    = $addr_spec[<span class="stringliteral">'domain'</span>];
<a name="l00637"></a>00637         }
<a name="l00638"></a>00638 
<a name="l00639"></a>00639         $mailbox = $mbox;
<a name="l00640"></a>00640         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00641"></a>00641     }
</pre></div>
<p>

</div>
</div><p>
<hr><h2>Member Data Documentation</h2>
<a class="anchor" name="5877614f0a6ce26678a0e9539b755b36"></a><!-- doxytag: member="Mail_RFC822::$address" ref="5877614f0a6ce26678a0e9539b755b36" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Mail_RFC822::$address = ''<code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The address being parsed by the RFC822 object. 
<p>
string $address 
<p>Definition at line <a class="el" href="RFC822_8php-source.html#l00039">39</a> of file <a class="el" href="RFC822_8php-source.html">RFC822.php</a>.</p>

<p>Referenced by <a class="el" href="RFC822_8php-source.html#l00116">__construct()</a>, <a class="el" href="RFC822_8php-source.html#l00270">_isGroup()</a>, <a class="el" href="RFC822_8php-source.html#l00194">_splitAddresses()</a>, <a class="el" href="RFC822_8php-source.html#l00393">_validateAddress()</a>, and <a class="el" href="RFC822_8php-source.html#l00138">parseAddressList()</a>.</p>

</div>
</div><p>
<a class="anchor" name="2721376cc9ebb037e4675d2b857ec2af"></a><!-- doxytag: member="Mail_RFC822::$addresses" ref="2721376cc9ebb037e4675d2b857ec2af" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Mail_RFC822::$addresses = array()<code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The array of raw addresses built up as we parse. 
<p>
array $addresses 
<p>Definition at line <a class="el" href="RFC822_8php-source.html#l00063">63</a> of file <a class="el" href="RFC822_8php-source.html">RFC822.php</a>.</p>

<p>Referenced by <a class="el" href="RFC822_8php-source.html#l00393">_validateAddress()</a>.</p>

</div>
</div><p>
<a class="anchor" name="b49b7553371daa564eb79e6a8ca3ec1c"></a><!-- doxytag: member="Mail_RFC822::$default_domain" ref="b49b7553371daa564eb79e6a8ca3ec1c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Mail_RFC822::$default_domain = 'localhost'<code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The default domain to use for unqualified addresses. 
<p>
string $default_domain 
<p>Definition at line <a class="el" href="RFC822_8php-source.html#l00045">45</a> of file <a class="el" href="RFC822_8php-source.html">RFC822.php</a>.</p>

<p>Referenced by <a class="el" href="RFC822_8php-source.html#l00116">__construct()</a>, and <a class="el" href="RFC822_8php-source.html#l00138">parseAddressList()</a>.</p>

</div>
</div><p>
<a class="anchor" name="44860e6dd3f70064bdeb06bd738e3a57"></a><!-- doxytag: member="Mail_RFC822::$error" ref="44860e6dd3f70064bdeb06bd738e3a57" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Mail_RFC822::$error = null<code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The current error message, if any. 
<p>
string $error 
<p>Definition at line <a class="el" href="RFC822_8php-source.html#l00075">75</a> of file <a class="el" href="RFC822_8php-source.html">RFC822.php</a>.</p>

</div>
</div><p>
<a class="anchor" name="d4aa3245d1f3ef7b6399cd0d15caeb34"></a><!-- doxytag: member="Mail_RFC822::$index" ref="d4aa3245d1f3ef7b6399cd0d15caeb34" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Mail_RFC822::$index = null<code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
An internal counter/pointer. 
<p>
integer $index 
<p>Definition at line <a class="el" href="RFC822_8php-source.html#l00081">81</a> of file <a class="el" href="RFC822_8php-source.html">RFC822.php</a>.</p>

</div>
</div><p>
<a class="anchor" name="15c34769862f0b8bd05c97ee74f5d265"></a><!-- doxytag: member="Mail_RFC822::$limit" ref="15c34769862f0b8bd05c97ee74f5d265" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Mail_RFC822::$limit = null<code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A limit after which processing stops int $limit. 
<p>

<p>Definition at line <a class="el" href="RFC822_8php-source.html#l00101">101</a> of file <a class="el" href="RFC822_8php-source.html">RFC822.php</a>.</p>

<p>Referenced by <a class="el" href="RFC822_8php-source.html#l00116">__construct()</a>, and <a class="el" href="RFC822_8php-source.html#l00138">parseAddressList()</a>.</p>

</div>
</div><p>
<a class="anchor" name="a37e5ef8742e15b9be63bfc4e596e82d"></a><!-- doxytag: member="Mail_RFC822::$mailRFC822" ref="a37e5ef8742e15b9be63bfc4e596e82d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Mail_RFC822::$mailRFC822 = true<code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
A variable so that we can tell whether or not we're inside a <a class="el" href="classMail__RFC822.html" title="o------------------------------------------------------------------------------o...">Mail_RFC822</a> object. 
<p>
boolean $mailRFC822 
<p>Definition at line <a class="el" href="RFC822_8php-source.html#l00095">95</a> of file <a class="el" href="RFC822_8php-source.html">RFC822.php</a>.</p>

</div>
</div><p>
<a class="anchor" name="d224177cce487dcdfab3bd842759b341"></a><!-- doxytag: member="Mail_RFC822::$nestGroups" ref="d224177cce487dcdfab3bd842759b341" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Mail_RFC822::$nestGroups = true<code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Should we return a nested array showing groups, or flatten everything? boolean $nestGroups. 
<p>

<p>Definition at line <a class="el" href="RFC822_8php-source.html#l00051">51</a> of file <a class="el" href="RFC822_8php-source.html">RFC822.php</a>.</p>

</div>
</div><p>
<a class="anchor" name="b4785c26251c6a2058189aeee0039be2"></a><!-- doxytag: member="Mail_RFC822::$num_groups" ref="b4785c26251c6a2058189aeee0039be2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Mail_RFC822::$num_groups = 0<code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The number of groups that have been found in the address list. 
<p>
integer $num_groups  public 
<p>Definition at line <a class="el" href="RFC822_8php-source.html#l00088">88</a> of file <a class="el" href="RFC822_8php-source.html">RFC822.php</a>.</p>

</div>
</div><p>
<a class="anchor" name="a8edf47ae1b5554b6c4fecc4c333236d"></a><!-- doxytag: member="Mail_RFC822::$structure" ref="a8edf47ae1b5554b6c4fecc4c333236d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Mail_RFC822::$structure = array()<code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The final array of parsed address information that we build up. 
<p>
array $structure 
<p>Definition at line <a class="el" href="RFC822_8php-source.html#l00069">69</a> of file <a class="el" href="RFC822_8php-source.html">RFC822.php</a>.</p>

<p>Referenced by <a class="el" href="RFC822_8php-source.html#l00393">_validateAddress()</a>.</p>

</div>
</div><p>
<a class="anchor" name="7ec46d351c4b758a738326d06308e6b4"></a><!-- doxytag: member="Mail_RFC822::$validate" ref="7ec46d351c4b758a738326d06308e6b4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Mail_RFC822::$validate = true<code> [private]</code>          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Whether or not to validate atoms for non-ascii characters. 
<p>
boolean $validate 
<p>Definition at line <a class="el" href="RFC822_8php-source.html#l00057">57</a> of file <a class="el" href="RFC822_8php-source.html">RFC822.php</a>.</p>

<p>Referenced by <a class="el" href="RFC822_8php-source.html#l00116">__construct()</a>, and <a class="el" href="RFC822_8php-source.html#l00138">parseAddressList()</a>.</p>

</div>
</div><p>
<hr>The documentation for this class was generated from the following file:<ul>
<li>Static/PhpInclude/FareOfficeLib/3dPart/Rmail/<a class="el" href="RFC822_8php-source.html">RFC822.php</a></ul>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Wed May 6 23:10:50 2009 for fareofficelib by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.8 </small></address>
</body>
</html>
